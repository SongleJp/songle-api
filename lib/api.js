!function(e,t){if("object"===typeof exports&&"object"===typeof module)module.exports=t();else if("function"===typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"===typeof exports?exports:e)[r]=n[r]}}(this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/packs/",n(n.s=379)}({0:function(e,t,n){"use strict";n.r(t),function(e){var r=n(12),o={};!function(e){Object.defineProperties(o,{currentTimeToMilliseconds:{configurable:!0,get:function(){return 1*Date.now()}},currentTimeToMicroseconds:{configurable:!0,get:function(){return 1e3*Date.now()}},defaultAppServerProtocol:{configurable:!0,get:function(){return o.__defaultAppServerProtocol__||"https:"},set:function(e){o.__defaultAppServerProtocol__=e}},defaultAppServerHost:{configurable:!0,get:function(){return o.__defaultAppServerHost__||"api.songle.jp"},set:function(e){o.__defaultAppServerHost__=e}},defaultAppServerEndpoint:{configurable:!0,get:function(){return o.defaultAppServerProtocol+"//"+o.defaultAppServerHost}},defaultLogServerProtocol:{configurable:!0,get:function(){return o.__defaultLogServerProtocol__||"https:"},set:function(e){o.__defaultLogServerProtocol__=e}},defaultLogServerHost:{configurable:!0,get:function(){return o.__defaultLogServerHost__||"log.songle.jp"},set:function(e){o.__defaultLogServerHost__=e}},defaultLogServerEndpoint:{configurable:!0,get:function(){return o.defaultLogServerProtocol+"//"+o.defaultLogServerHost}},defaultWebsocketServerProtocol:{configurable:!0,get:function(){var t="";return e.location&&(t="file:"==e.location.protocol?"wss:":""),o.__defaultWebsocketServerProtocol__||t},set:function(e){o.__defaultWebsocketServerProtocol__=e}},defaultWebsocketServerHost:{configurable:!0,get:function(){return o.__defaultWebsocketServerHost__||"api.songle.jp"},set:function(e){o.__defaultWebsocketServerHost__=e}},defaultWebsocketServerEndpoint:{configurable:!0,get:function(){return o.defaultWebsocketServerProtocol+"//"+o.defaultWebsocketServerHost}},global:{configurable:!0,get:function(){return e}},isStandalone:{configurable:!0,get:function(){return!e.document}},isWebBrowser:{configurable:!0,get:function(){return!!e.document}},language:{configurable:!0,get:function(){var e=window.navigator.languages&&window.navigator.languages[0]||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage;switch(!0){case/en/.test(e.toLowerCase()):return"en";case/ja/.test(e.toLowerCase()):return"ja";default:return"en"}}},referer:{configurable:!0,get:function(){return o.isStandalone?"-":e.document.referrer}},userAgent:{configurable:!0,get:function(){return o.isStandalone?"-":e.navigator.appCodeName+"/"+navigator.appVersion}},searchQueries:{configurable:!0,get:function(){var e={};return location.search.slice(location.search.indexOf("?")+1).split("&").forEach(function(t){var n=t.match(/(.+?)=(.+)/);if(n){var r=n[1],o=n[2];e[r]=o?decodeURIComponent(o):o}}),e}},showDebugLog:{configurable:!0,get:function(){return!!o.__showDebugLog__},set:function(e){o.__showDebugLog__=!!e}},showErrorLog:{configurable:!0,get:function(){return!!o.__showErrorLog__},set:function(e){o.__showErrorLog__=!!e}},showLicense:{configurable:!0,get:function(){return!!o.__showLicense__},set:function(e){o.__showLicense__=!!e,e?(r.default.removeLicense(),r.default.createLicense(e)):(r.default.removeLicense(),console.log("# \u30e9\u30a4\u30bb\u30f3\u30b9\u8868\u8a18\u306b\u95a2\u3059\u308b\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3\n\n\u56fd\u7acb\u7814\u7a76\u958b\u767a\u6cd5\u4eba\u7523\u696d\u6280\u8853\u7dcf\u5408\u7814\u7a76\u6240\n\u60c5\u5831\u6280\u8853\u7814\u7a76\u90e8\u9580\n\u30e1\u30c7\u30a3\u30a2\u30a4\u30f3\u30bf\u30e9\u30af\u30b7\u30e7\u30f3\u7814\u7a76\u30b0\u30eb\u30fc\u30d7\n\nSongle API\u306f\u975e\u5546\u7528\u5229\u7528\u306b\u9650\u308a\u3001\u3069\u306a\u305f\u3067\u3082\u7121\u6599\u30fb\u7121\u4fdd\u8a3c\u3067\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u305f\u3060\u3057\u3001\u539f\u5247\u3068\u3057\u3066Songle API\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u65e8\u3092 https://api.songle.jp/ \u306b\u30cf\u30a4\u30d1\u30fc\u30ea\u30f3\u30af\u3057\u305f\u4e0a\u3067\u3001\u5229\u7528\u3057\u3066\u3044\u308b\u30b7\u30b9\u30c6\u30e0\u3082\u3057\u304f\u306f\u5916\u90e8\u30b5\u30a4\u30c8\u7b49\u306b\u8868\u793a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n# \u304a\u554f\u3044\u5408\u308f\u305b\n\nsongle-api-ml@aist.go.jp"))}}}),o.stringIsBlank=function(e){return""==e||null==e},e.__sw__=o}((0).self||e),t.default=o}.call(this,n(21))},11:function(e,t,n){"use strict";n.r(t);var r=n(6),o=n(3),a=n(0);var i={getSong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,i){var u=null!=t.endpointProtocol?t.endpointProtocol:"",s=null!=t.endpointHost?t.endpointHost:"",c=null!=t.endpointPath?t.endpointPath:"",l="string"==typeof e?e:e&&e.media?e.media.sourceUrl:"",f=[];if(f.push("syntax=camelcase"),f.push("endpoint_protocol=".concat(u)),f.push("endpoint_host=".concat(s)),f.push("endpoint_path=".concat(c)),f.push("url=".concat(encodeURIComponent(l))),a.default.stringIsBlank(l))return i(o.default.createMediaSourceError(e));r.default.getJSON("".concat(a.default.defaultAppServerEndpoint,"/api/v2/song.json?").concat(f.join("&"))).then(function(t){return 200!=t.meta.status?i(o.default.createError(e,t)):"songle_song"!=t.data.type?i(o.default.createError(e,t)):void n(t.data)},function(e){i(e)})})},getSongBeat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,i){var u=null!=t.endpointProtocol?t.endpointProtocol:"",s=null!=t.endpointHost?t.endpointHost:"",c=null!=t.endpointPath?t.endpointPath:"",l="string"==typeof e?e:e&&e.media?e.media.sourceUrl:"",f=null!=t.revisionId?t.revisionId:0,p=[];if(p.push("syntax=camelcase"),p.push("endpoint_protocol=".concat(u)),p.push("endpoint_host=".concat(s)),p.push("endpoint_path=".concat(c)),p.push("url=".concat(encodeURIComponent(l))),p.push("revision_id=".concat(f)),a.default.stringIsBlank(l))return i(o.default.createMediaSourceError(e));r.default.getJSON("".concat(a.default.defaultAppServerEndpoint,"/api/v2/song/beat.json?").concat(p.join("&"))).then(function(t){if(200!=t.meta.status)return i(o.default.createError(e,t));n(t.data)},function(e){i(e)})})},getSongChord:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,i){var u=null!=t.endpointProtocol?t.endpointProtocol:"",s=null!=t.endpointHost?t.endpointHost:"",c=null!=t.endpointPath?t.endpointPath:"",l="string"==typeof e?e:e&&e.media?e.media.sourceUrl:"",f=null!=t.revisionId?t.revisionId:0,p=[];if(p.push("syntax=camelcase"),p.push("endpoint_protocol=".concat(u)),p.push("endpoint_host=".concat(s)),p.push("endpoint_path=".concat(c)),p.push("url=".concat(encodeURIComponent(l))),p.push("revision_id=".concat(f)),a.default.stringIsBlank(l))return i(o.default.createMediaSourceError(e));r.default.getJSON("".concat(a.default.defaultAppServerEndpoint,"/api/v2/song/chord.json?").concat(p.join("&"))).then(function(t){if(200!=t.meta.status)return i(o.default.createError(e,t));n(t.data)},function(e){i(e)})})},getSongMelody:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,i){var u=null!=t.endpointProtocol?t.endpointProtocol:"",s=null!=t.endpointHost?t.endpointHost:"",c=null!=t.endpointPath?t.endpointPath:"",l="string"==typeof e?e:e&&e.media?e.media.sourceUrl:"",f=null!=t.revisionId?t.revisionId:0,p=[];if(p.push("syntax=camelcase"),p.push("endpoint_protocol=".concat(u)),p.push("endpoint_host=".concat(s)),p.push("endpoint_path=".concat(c)),p.push("url=".concat(encodeURIComponent(l))),p.push("revision_id=".concat(f)),a.default.stringIsBlank(l))return i(o.default.createMediaSourceError(e));r.default.getJSON("".concat(a.default.defaultAppServerEndpoint,"/api/v2/song/melody.json?").concat(p.join("&"))).then(function(t){if(200!=t.meta.status)return i(o.default.createError(e,t));n(t.data)},function(e){i(e)})})},getSongChorus:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,i){var u=null!=t.endpointProtocol?t.endpointProtocol:"",s=null!=t.endpointHost?t.endpointHost:"",c=null!=t.endpointPath?t.endpointPath:"",l="string"==typeof e?e:e&&e.media?e.media.sourceUrl:"",f=null!=t.revisionId?t.revisionId:0,p=[];if(p.push("syntax=camelcase"),p.push("endpoint_protocol=".concat(u)),p.push("endpoint_host=".concat(s)),p.push("endpoint_path=".concat(c)),p.push("url=".concat(encodeURIComponent(l))),p.push("revision_id=".concat(f)),a.default.stringIsBlank(l))return i(o.default.createMediaSourceError(e));r.default.getJSON("".concat(a.default.defaultAppServerEndpoint,"/api/v2/song/chorus.json?").concat(p.join("&"))).then(function(t){if(200!=t.meta.status)return i(o.default.createError(e,t));n(t.data)},function(e){i(e)})})},getSongVariation:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,i){var u=null!=t.endpointProtocol?t.endpointProtocol:"",s=null!=t.endpointHost?t.endpointHost:"",c=null!=t.endpointPath?t.endpointPath:"",l="string"==typeof e?e:e&&e.media?e.media.sourceUrl:"",f=null!=t.revisionId?t.revisionId:0,p=null!=t.groupCount?t.groupCount:2,_=[];if(_.push("syntax=camelcase"),_.push("endpoint_protocol=".concat(u)),_.push("endpoint_host=".concat(s)),_.push("endpoint_path=".concat(c)),_.push("url=".concat(encodeURIComponent(l))),_.push("revision_id=".concat(f)),_.push("group_count=".concat(p)),a.default.stringIsBlank(l))return i(o.default.createMediaSourceError(e));r.default.getJSON("".concat(a.default.defaultAppServerEndpoint,"/api/v2/song/variation.json?").concat(_.join("&"))).then(function(t){if(200!=t.meta.status)return i(o.default.createError(e,t));n(t.data)},function(e){i(e)})})}};t.default=i},119:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},12:function(e,t,n){"use strict";n.r(t);var r=n(0),o="songle-api-license";function a(){return document.querySelector(".".concat(o))}var i={createLicense:function(e){if(!r.default.isStandalone){var t=a();if(!t){switch((t=document.createElement("img")).className=o,t.style.cursor="pointer",t.style.borderRadius="4px",t.style.position="fixed",t.style.zIndex="9999",e){case"left-top":t.style.left="4px",t.style.top="4px",t.style.width="24px",t.style.height="24px";break;case"left-bottom":t.style.left="4px",t.style.bottom="4px",t.style.width="24px",t.style.height="24px";break;case"right-top":t.style.right="4px",t.style.top="4px",t.style.width="24px",t.style.height="24px";break;default:case"right-bottom":t.style.right="4px",t.style.bottom="4px",t.style.width="24px",t.style.height="24px"}t.alt="Powered by Songle API",t.src="https://api.songle.jp/license-icons/songle.png",t.width=24,t.height=24,t.addEventListener("click",function(e){return open("https://api.songle.jp")},!1),t.addEventListener("touch",function(e){return open("https://api.songle.jp")},!1),document.body&&document.body.appendChild(t)}}},removeLicense:function(){if(!r.default.isStandalone){var e=a();e&&e.remove()}}};t.default=i},120:function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,o=n;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},13:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r);n(14);function a(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function u(e){a(i,r,o,u,s,"next",e)}function s(e){a(i,r,o,u,s,"throw",e)}u(void 0)})}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.traps=[]}var t,n,r;return t=e,n=[{key:"initialize",value:function(){var e=i(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.__player__=t;case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){var e=i(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.traps=[];case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"mapTraps",value:function(e){var t=this,n=this.player.dispatchers.map(function(n){return n.traps.map(function(n){if(-1!=t.__convertToStringArray__(e).indexOf(n.name))return n}).filter(function(e){return null!=e})});return Array.prototype.concat.apply([],n)}},{key:"mapTrapsHasAnyData",value:function(e){return this.mapTraps(e).filter(function(e){return null!=e.data})}},{key:"mapTrapsHasNotData",value:function(e){return this.mapTraps(e).filter(function(e){return null==e.data})}},{key:"on",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.offset=null!=r.offset?r.offset:0,(e=this.__convertToStringArray__(e)).forEach(function(e){e=n.__validateTrapName__(e),n.traps.push({name:e,trap:t,data:null,options:r})})}},{key:"off",value:function(e,t){var n=this;arguments.length>2&&void 0!==arguments[2]&&arguments[2];(e=this.__convertToStringArray__(e)).forEach(function(e){e=n.__validateTrapName__(e),n.traps.forEach(function(r,o){r.name===e&&r.trap===t&&n.traps.splice(o,1)})})}},{key:"invokeSelfTrap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=this.__validateTrapName__(e),this.traps.forEach(function(n){n.name==e&&(t.type=e,n.trap(t))})}},{key:"__convertToStringArray__",value:function(e){return"string"==typeof e?[e]:e}},{key:"__validateTrapName__",value:function(e){switch(e){case"beatPlay":e="beatEnter";break;case"chordChange":case"chordPlay":e="chordEnter";break;case"melodyPlay":e="melodyEnter";break;case"variationChange":case"variationPlay":e="variationEnter";break;case"chorusEnter":e="chorusSectionEnter";break;case"chorusLeave":e="chorusSectionLeave";break;case"repeatEnter":case"repeatSectionEnter":e="repeatedSectionEnter";break;case"repeatLeave":case"repeatSectionLeave":e="repeatedSectionLeave"}return e}},{key:"dispatcherName",get:function(){return"dispatcher"}},{key:"dispatcherType",get:function(){return"dispatcher"}},{key:"player",get:function(){return this.__player__}}],r=[{key:"Name",get:function(){return"dispatcher"}},{key:"Type",get:function(){return"dispatcher"}}],n&&u(t.prototype,n),r&&u(t,r),e}();t.default=s},14:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=(n(9),n(13)),i=n(4),u=n(18),s=n(7),c=n(28),l=(n(0),n(8));function f(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){f(a,r,o,i,u,"next",e)}function u(e){f(a,r,o,i,u,"throw",e)}i(void 0)})}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(){var e,n,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(r=_(t).call(this))||"object"!==typeof r&&"function"!==typeof r?d(n):r).__readyUseMedia__=!1,e.__musicMap__={},e.__endpointProtocol__=o.endpointProtocol,e.__endpointHost__=o.endpointHost,e.__endpointPath__=o.endpointPath,e.__accessToken__=o.accessToken,e.__secretToken__=o.secretToken,e.__mediaElement__=o.mediaElement,e.dispatchers=[d(e)],e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,a["default"]),y(t,null,[{key:"Name",get:function(){return"player"}},{key:"Type",get:function(){return"player"}},{key:"MinVolume",get:function(){return 0}},{key:"MaxVolume",get:function(){return 100}}]),y(t,[{key:"dispose",value:function(){var e=p(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"activate",value:function(){this.media.play()}},{key:"useMedia",value:function(){var e=p(o.a.mark(function e(t){var n,r=this,a=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},!this.__readyUseMedia__){e.next=3;break}return e.abrupt("return");case 3:return this.__readyUseMedia__=!0,e.next=6,Promise.all(this.dispatchers.map(function(e){return e.dispose()}));case 6:if(!this.__media__){e.next=9;break}return e.next=9,this.__media__.dispose();case 9:e.t0=typeof t,e.next="string"===e.t0?12:16;break;case 12:return e.next=14,c.default.createMedia(this,t,Object.assign(n,{rootElement:this.mediaElement||n.rootElement,onMediaFactoryError:function(e){r.invokeTrap("mediaFactroyError",{target:r})},onMediaFactoryReady:function(e){r.invokeTrap("mediaFactroyReady",{target:r})}}));case 14:return this.__media__=e.sent,e.abrupt("break",18);case 16:return this.__media__=t,e.abrupt("break",18);case 18:return e.next=20,this.__media__.initialize(this,n);case 20:return e.next=22,Promise.all(this.dispatchers.map(function(e){return e.initialize(r)}));case 22:this.invokeTrap("mediaReady",{target:this}),this.__readyUseMedia__=!1;case 24:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addPlugin",value:function(e){e.dispatcherType!=u.default.Type||this.dispatchers.find(function(t){return t.dispatcherName==e.dispatcherName})?s.default.warn("'"+e.dispatcherName+"' is NOT plugin or already installed."):(e.__player__=this,this.dispatchers.push(e))}},{key:"invokeTrap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__media__&&this.__media__.invokeSelfTrap(e,t),this.dispatchers.forEach(function(n){n.invokeSelfTrap(e,t)})}},{key:"play",value:function(){this.__media__?this.media.play():s.default.warn("'SW.Player.media' was NOT set. Please set media using 'SW.Player.useMedia' function")}},{key:"pause",value:function(){this.__media__?this.media.pause():s.default.warn("'SW.Player.media' was NOT set. Please set media using 'SW.Player.useMedia' function")}},{key:"stop",value:function(){this.__media__?(this.media.seekTo(0),this.media.pause()):s.default.warn("'SW.Player.media' was NOT set. Please set media using 'SW.Player.useMedia' function")}},{key:"seekTo",value:function(e){this.__media__?this.invokeTrap("seek",{target:this,data:{position:e}}):s.default.warn("'SW.Player.media' was NOT set. Please set media using 'SW.Player.useMedia' function")}},{key:"dispatcherName",get:function(){return t.Name}},{key:"dispatcherType",get:function(){return t.Type}},{key:"endpointProtocol",get:function(){return this.__endpointProtocol__||""}},{key:"endpointHost",get:function(){return this.__endpointHost__||""}},{key:"endpointPath",get:function(){return this.__endpointPath__||""}},{key:"accessToken",get:function(){return this.__accessToken__||""},set:function(e){this.__accessToken__=e}},{key:"secretToken",get:function(){return this.__secretToken__||""},set:function(e){this.__secretToken__=e}},{key:"mediaElement",get:function(){return l.default.querySelector(this.__mediaElement__)},set:function(e){this.__mediaElement__=e}},{key:"media",get:function(){return this.__media__}},{key:"musicMap",get:function(){return this.__musicMap__}},{key:"isReady",get:function(){return this.media?this.media.isReady:i.default.DefaultIsReady}},{key:"isPlaying",get:function(){return this.media?this.media.isPlaying:i.default.DefaultIsPlaying}},{key:"isPaused",get:function(){return this.media?this.media.isPaused:i.default.DefaultIsPaused}},{key:"isSeeking",get:function(){return this.media?this.media.isSeeking:i.default.DefaultIsSeeking}},{key:"position",get:function(){return this.media?this.media.position:0}},{key:"duration",get:function(){return this.media?this.media.duration:0}},{key:"volume",get:function(){return this.media.volume},set:function(e){e<0&&(e=0),e>100&&(e=100),this.media.volume=e}}]),t}();t.default=g},155:function(e,t,n){"use strict";n.r(t);var r=n(14),o=n(77);function a(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=a(this,i(t).call(this,n))).addPlugin(new o.default),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["default"]),t}();t.default=s},156:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=n(45),i=n(9),u=n(46),s=n(94);function c(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t,n){return(p="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,_(t).apply(this,arguments))}var n,r,h;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,u["default"]),n=t,r=[{key:"initialize",value:function(){var e,n=(e=o.a.mark(function e(n){var r=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p(_(t.prototype),"initialize",this).call(this,n),n.seekToPrevBar=function(){var e=a.default.findPrevBar(n);e&&n.seekTo(e.start)},n.seekToNextBar=function(){var e=a.default.findNextBar(n);e&&n.seekTo(e.start)},e.t0=this,e.next=6,i.default.MusicMap.getSongBeat(n,{endpointProtocol:this.endpointProtocol,endpointHost:this.endpointHost,endpointPath:this.endpointPath,revisionId:this.revisionId});case 6:e.t1=e.sent,e.t0.__updateMusicMap__.call(e.t0,e.t1),this.on(["play","pause","mediaSeek","seek"],function(e){r.__resetBarLeaveTrap__(),r.__resetBeatLeaveTrap__(),r.__resetBarEnterTrap__(),r.__resetBeatEnterTrap__()}),function e(){r.mapTrapsHasNotData(["barEnter","barLeave","beatEnter","beatLeave"]).forEach(function(e){return e.data=new s.default(r.player)}),setTimeout(function(){r.player.isPlaying&&(r.__invokeBarLeaveTrap__(),r.__invokeBeatLeaveTrap__(),r.__invokeBarEnterTrap__(),r.__invokeBeatEnterTrap__()),e()},r.pollingInterval)}();case 11:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,u,"next",e)}function u(e){c(a,r,o,i,u,"throw",e)}i(void 0)})});return function(e){return n.apply(this,arguments)}}()},{key:"__resetBarEnterTrap__",value:function(){this.mapTrapsHasAnyData("barEnter").forEach(function(e){return e.data.reset()})}},{key:"__resetBarLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("barLeave").forEach(function(t){return t.data.reset({leave:function(n){return e.__invokeTrap__(t,n)}})})}},{key:"__resetBeatEnterTrap__",value:function(){this.mapTrapsHasAnyData("beatEnter").forEach(function(e){return e.data.reset()})}},{key:"__resetBeatLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("beatLeave").forEach(function(t){return t.data.reset({leave:function(n){return e.__invokeTrap__(t,n)}})})}},{key:"__invokeBarEnterTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("barEnter").forEach(function(t){return t.data.find({enter:function(n){1==n.beat.position&&e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__invokeBarLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("barLeave").forEach(function(t){return t.data.find({leave:function(n){1==n.beat.position&&e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__invokeBeatEnterTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("beatEnter").forEach(function(t){return t.data.find({enter:function(n){return e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__invokeBeatLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("beatLeave").forEach(function(t){return t.data.find({leave:function(n){return e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__updateMusicMap__",value:function(e){var t=this;this.player.musicMap.beats=e.attributes.sequence,this.player.musicMap.beats.forEach(function(e){[{source:"startTimeMs",target:"start"},{source:"numberOfBeatsPerBar",target:"count"},{source:"number",target:"position"}].forEach(function(t){e.__defineGetter__(t.target,function(){return e[t.source]})}),e.prev=t.player.musicMap.beats[e.index-1]||null,e.next=t.player.musicMap.beats[e.index+1]||null})}},{key:"dispatcherName",get:function(){return t.Name}}],h=[{key:"Name",get:function(){return"sw-plugin-beat"}},{key:"BarEnterTrapName",get:function(){return"barEnter"}},{key:"BarLeaveTrapName",get:function(){return"barLeave"}},{key:"BeatEnterTrapName",get:function(){return"beatEnter"}},{key:"BeatLeaveTrapName",get:function(){return"beatLeave"}}],r&&l(n.prototype,r),h&&l(n,h),t}();t.default=h},157:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=(n(45),n(9)),i=n(46),u=n(95);function s(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t,n){return(f="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,p(t).apply(this,arguments))}var n,r,d;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,i["default"]),n=t,r=[{key:"initialize",value:function(){var e,n=(e=o.a.mark(function e(n){var r=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f(p(t.prototype),"initialize",this).call(this,n),e.t0=this,e.next=4,a.default.MusicMap.getSongChord(n,{endpointProtocol:this.endpointProtocol,endpointHost:this.endpointHost,endpointPath:this.endpointPath,revisionId:this.revisionId});case 4:e.t1=e.sent,e.t0.__updateMusicMap__.call(e.t0,e.t1),this.on(["play","pause","mediaSeek","seek"],function(e){r.__resetChordLeaveTrap__(),r.__resetChordEnterTrap__()}),function e(){r.mapTrapsHasNotData(["chordEnter","chordLeave"]).forEach(function(e){return e.data=new u.default(r.player)}),setTimeout(function(){r.player.isPlaying&&(r.__runChordLeaveTrap__(),r.__runChordEnterTrap__()),e()},r.pollingInterval)}();case 9:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){s(a,r,o,i,u,"next",e)}function u(e){s(a,r,o,i,u,"throw",e)}i(void 0)})});return function(e){return n.apply(this,arguments)}}()},{key:"__resetChordEnterTrap__",value:function(){this.mapTrapsHasAnyData("chordEnter").forEach(function(e){return e.data.reset()})}},{key:"__resetChordLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("chordLeave").forEach(function(t){return t.data.reset({leave:function(n){return e.__invokeTrap__(t,n)}})})}},{key:"__runChordEnterTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("chordEnter").forEach(function(t){return t.data.find({enter:function(n){return e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__runChordLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("chordLeave").forEach(function(t){return t.data.find({leave:function(n){return e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__updateMusicMap__",value:function(e){var t=this;this.player.musicMap.chords=e.attributes.sequence,this.player.musicMap.chords.forEach(function(e){[{source:"startTimeMs",target:"start"},{source:"durationTimeMs",target:"duration"}].forEach(function(t){e.__defineGetter__(t.target,function(){return e[t.source]})}),e.prev=t.player.musicMap.chords[e.index-1]||null,e.next=t.player.musicMap.chords[e.index+1]||null})}},{key:"dispatcherName",get:function(){return t.Name}}],d=[{key:"Name",get:function(){return"sw-plugin-chord"}},{key:"ChordEnterTrapName",get:function(){return"chordEnter"}},{key:"ChordLeaveTrapName",get:function(){return"chordLeave"}}],r&&c(n.prototype,r),d&&c(n,d),t}();t.default=d},158:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=(n(45),n(9)),i=n(46),u=n(96);function s(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t,n){return(f="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,p(t).apply(this,arguments))}var n,r,d;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,i["default"]),n=t,r=[{key:"initialize",value:function(){var e,n=(e=o.a.mark(function e(n){var r=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f(p(t.prototype),"initialize",this).call(this,n),e.t0=this,e.next=4,a.default.MusicMap.getSongMelody(n,{endpointProtocol:this.endpointProtocol,endpointHost:this.endpointHost,endpointPath:this.endpointPath,revisionId:this.revisionId});case 4:e.t1=e.sent,e.t0.__updateMusicMap__.call(e.t0,e.t1),this.on(["play","pause","mediaSeek","seek"],function(e){r.__resetMelodyLeaveTrap__(),r.__resetMelodyEnterTrap__()}),function e(){r.mapTrapsHasNotData(["melodyEnter","melodyLeave"]).forEach(function(e){return e.data=new u.default(r.player)}),setTimeout(function(){r.player.isPlaying&&(r.__runMelodyLeaveTrap__(),r.__runMelodyEnterTrap__()),e()},r.pollingInterval)}();case 9:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){s(a,r,o,i,u,"next",e)}function u(e){s(a,r,o,i,u,"throw",e)}i(void 0)})});return function(e){return n.apply(this,arguments)}}()},{key:"__resetMelodyEnterTrap__",value:function(){this.mapTrapsHasAnyData("melodyEnter").forEach(function(e){return e.data.reset()})}},{key:"__resetMelodyLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("melodyLeave").forEach(function(t){return t.data.reset({leave:function(n){return e.__invokeTrap__(t,n)}})})}},{key:"__runMelodyEnterTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("melodyEnter").forEach(function(t){return t.data.find({enter:function(n){return e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__runMelodyLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("melodyLeave").forEach(function(t){return t.data.find({leave:function(n){return e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__updateMusicMap__",value:function(e){var t=this;this.player.musicMap.melodies=e.attributes.sequence,this.player.musicMap.melodies.forEach(function(e){[{source:"startTimeMs",target:"start"},{source:"durationTimeMs",target:"duration"}].forEach(function(t){e.__defineGetter__(t.target,function(){return e[t.source]})}),e.prev=t.player.musicMap.melodies[e.index-1]||null,e.next=t.player.musicMap.melodies[e.index+1]||null})}},{key:"dispatcherName",get:function(){return t.Name}}],d=[{key:"Name",get:function(){return"sw-plugin-melody"}},{key:"MelodyEnterTrapName",get:function(){return"melodyEnter"}},{key:"MelodyLeaveTrapName",get:function(){return"melodyLeave"}}],r&&c(n.prototype,r),d&&c(n,d),t}();t.default=d},159:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=n(45),i=n(9),u=n(46),s=n(97);function c(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t,n){return(p="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,_(t).apply(this,arguments))}var n,r,h;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,u["default"]),n=t,r=[{key:"initialize",value:function(){var e,n=(e=o.a.mark(function e(n){var r=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p(_(t.prototype),"initialize",this).call(this,n),n.seekToPrevChorusSection=function(){var e=a.default.findPrevRepeatedSectionItem(n,{chorusOnly:!0});e&&n.seekTo(e.start)},n.seekToPrevChorusSectionItem=n.seekToPrevChorusSection,n.seekToNextChorusSection=function(){var e=a.default.findNextRepeatedSectionItem(n,{chorusOnly:!0});e&&n.seekTo(e.start)},n.seekToNextChorusSectionItem=n.seekToNextChorusSection,n.seekToPrevRepeatedSection=function(){var e=a.default.findPrevRepeatedSectionItem(n);e&&n.seekTo(e.start)},n.seekToPrevRepeatedSectionItem=n.seekToPrevRepeatedSection,n.seekToNextRepeatedSection=function(){var e=a.default.findNextRepeatedSectionItem(n);e&&n.seekTo(e.start)},n.seekToNextRepeatedSectionItem=n.seekToNextRepeatedSection,e.t0=this,e.next=12,i.default.MusicMap.getSongChorus(n,{endpointProtocol:this.endpointProtocol,endpointHost:this.endpointHost,endpointPath:this.endpointPath,revisionId:this.revisionId});case 12:e.t1=e.sent,e.t0.__updateMusicMap__.call(e.t0,e.t1),this.on(["play","pause","mediaSeek","seek"],function(e){r.__resetChorusSectionLeaveTrap__(),r.__resetChorusSectionEnterTrap__(),r.__resetRepeatedSectionLeaveTrap__(),r.__resetRepeatedSectionEnterTrap__()}),function e(){r.mapTrapsHasNotData(["chorusSectionEnter","chorusSectionLeave","repeatedSectionEnter","repeatedSectionLeave"]).forEach(function(e){return e.data=new s.default(r.player)}),setTimeout(function(){r.player.isPlaying&&(r.__runChorusSectionLeaveTrap__(),r.__runChorusSectionEnterTrap__(),r.__runRepeatedSectionLeaveTrap__(),r.__runRepeatedSectionEnterTrap__()),e()},r.pollingInterval)}();case 17:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,u,"next",e)}function u(e){c(a,r,o,i,u,"throw",e)}i(void 0)})});return function(e){return n.apply(this,arguments)}}()},{key:"__resetChorusSectionEnterTrap__",value:function(){this.mapTrapsHasAnyData("chorusSectionEnter").forEach(function(e){return e.data.reset()})}},{key:"__resetChorusSectionLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("chorusSectionLeave").forEach(function(t){return t.data.reset({leave:function(n){n.section.isChorus&&e.__invokeTrap__(t,n)}})})}},{key:"__resetRepeatedSectionEnterTrap__",value:function(){this.mapTrapsHasAnyData("repeatedSectionEnter").forEach(function(e){return e.data.reset()})}},{key:"__resetRepeatedSectionLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("repeatedSectionLeave").forEach(function(t){return t.data.reset({leave:function(n){return e.__invokeTrap__(t,n)}})})}},{key:"__runChorusSectionEnterTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("chorusSectionEnter").forEach(function(t){return t.data.find({enter:function(n){n.section.isChorus&&e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__runChorusSectionLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("chorusSectionLeave").forEach(function(t){return t.data.find({leave:function(n){n.section.isChorus&&e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__runRepeatedSectionEnterTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("repeatedSectionEnter").forEach(function(t){return t.data.find({enter:function(n){return e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__runRepeatedSectionLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("repeatedSectionLeave").forEach(function(t){return t.data.find({leave:function(n){return e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__updateMusicMap__",value:function(e){this.player.musicMap.chorus=e.attributes.sequence,this.player.musicMap.chorusSections=e.attributes.sequence.filter(function(e){return e.isChorus}),this.player.musicMap.repeatSections=e.attributes.sequence,this.player.musicMap.chorusSections.forEach(function(e){[{source:"items",target:"repeats"},{source:"durationTimeMs",target:"duration"}].forEach(function(t){e.__defineGetter__(t.target,function(){return e[t.source]})}),e.items.forEach(function(t){[{source:"startTimeMs",target:"start"},{source:"durationTimeMs",target:"duration"},{source:"endTimeMs",target:"end"}].forEach(function(e){t.__defineGetter__(e.target,function(){return t[e.source]})}),t.prev=e.items[t.index-1]||null,t.next=e.items[t.index+1]||null})}),this.player.musicMap.repeatSections.forEach(function(e){[{source:"items",target:"repeats"},{source:"durationTimeMs",target:"duration"}].forEach(function(t){e.__defineGetter__(t.target,function(){return e[t.source]})}),e.items.forEach(function(t){[{source:"startTimeMs",target:"start"},{source:"durationTimeMs",target:"duration"},{source:"endTimeMs",target:"end"}].forEach(function(e){t.__defineGetter__(e.target,function(){return t[e.source]})}),t.prev=e.items[t.index-1]||null,t.next=e.items[t.index+1]||null})})}},{key:"dispatcherName",get:function(){return t.Name}}],h=[{key:"Name",get:function(){return"sw-plugin-chorus"}},{key:"ChorusSectionEnterTrapName",get:function(){return"chorusSectionEnter"}},{key:"ChorusSectionLeaveTrapName",get:function(){return"chorusSectionLeave"}},{key:"RepeatedSectionEnterTrapName",get:function(){return"repeatedSectionEnter"}},{key:"RepeatedSectionLeaveTrapName",get:function(){return"repeatedSectionLeave"}}],r&&l(n.prototype,r),h&&l(n,h),t}();t.default=h},160:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=(n(45),n(9)),i=n(46),u=n(98);function s(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function c(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=2,y=10,v=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=c(this,f(t).call(this,n))).__groupCount__=null!=n.groupCount?n.groupCount:2,e.__groupCount__<h&&(e.__groupCount__=h),e.__groupCount__>y&&(e.__groupCount__=y),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,i["default"]),_(t,null,[{key:"Name",get:function(){return"sw-plugin-variation"}},{key:"MinGroupCount",get:function(){return h}},{key:"MaxGroupCount",get:function(){return y}},{key:"VariationEnterTrapName",get:function(){return"variationEnter"}},{key:"VariationLeaveTrapName",get:function(){return"variationLeave"}}]),_(t,[{key:"initialize",value:function(){var e,n=(e=o.a.mark(function e(n){var r=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l(f(t.prototype),"initialize",this).call(this,n),e.t0=this,e.next=4,a.default.MusicMap.getSongVariation(n,{endpointProtocol:this.endpointProtocol,endpointHost:this.endpointHost,endpointPath:this.endpointPath,groupCount:this.__groupCount__});case 4:e.t1=e.sent,e.t0.__updateMusicMap__.call(e.t0,e.t1),this.on(["play","pause","mediaSeek","seek"],function(e){r.__resetVariationLeaveTrap__(),r.__resetVariationEnterTrap__()}),function e(){r.mapTrapsHasNotData(["variationEnter","variationLeave"]).forEach(function(e){return e.data=new u.default(r.player)}),setTimeout(function(){r.player.isPlaying&&(r.__runVariationLeaveTrap__(),r.__runVariationEnterTrap__()),e()},r.pollingInterval)}();case 9:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){s(a,r,o,i,u,"next",e)}function u(e){s(a,r,o,i,u,"throw",e)}i(void 0)})});return function(e){return n.apply(this,arguments)}}()},{key:"__resetVariationEnterTrap__",value:function(){this.mapTrapsHasAnyData("variationEnter").forEach(function(e){return e.data.reset()})}},{key:"__resetVariationLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("variationLeave").forEach(function(t){return t.data.reset({leave:function(n){return e.__invokeTrap__(t,n)}})})}},{key:"__runVariationEnterTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("variationEnter").forEach(function(t){return t.data.find({enter:function(n){return e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__runVariationLeaveTrap__",value:function(){var e=this;this.mapTrapsHasAnyData("variationLeave").forEach(function(t){return t.data.find({leave:function(n){return e.__invokeTrap__(t,n)}},{offset:t.options.offset+e.offset})})}},{key:"__updateMusicMap__",value:function(e){var t=this;this.player.musicMap.variations=e.attributes.sequence,this.player.musicMap.variations.forEach(function(e){[{source:"startTimeMs",target:"start"},{source:"durationTimeMs",target:"duration"}].forEach(function(t){e.__defineGetter__(t.target,function(){return e[t.source]})}),e.prev=t.player.musicMap.variations[e.index-1]||null,e.next=t.player.musicMap.variations[e.index+1]||null})}},{key:"dispatcherName",get:function(){return t.Name}}]),t}();t.default=v},171:function(e,t,n){"use strict";n.r(t);var r=n(14),o=n(78);function a(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=a(this,i(t).call(this,n))).addPlugin(new o.default),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["default"]),t}();t.default=s},18:function(e,t,n){"use strict";n.r(t);var r=n(13);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,i(t).apply(this,arguments))}var n,s,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["default"]),n=t,c=[{key:"Name",get:function(){return"plugin"}},{key:"Type",get:function(){return"plugin"}}],(s=[{key:"dispatcherName",get:function(){return"plugin"}},{key:"dispatcherType",get:function(){return"plugin"}}])&&o(n.prototype,s),c&&o(n,c),t}();t.default=s},2:function(e,t,n){e.exports=n(36)},21:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},22:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=(n(14),n(4));function i(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return(s="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _="play",d="pause",h="seeking",y="ended",v="timeupdate",g=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=c(t).call(this),(n=!o||"object"!==typeof o&&"function"!==typeof o?u(r):o).__originalPlayer__=e,n.__originalPlayer__.addEventListener(_,function(e){n.__invokeMediaStateChangeTrap__(u(n),a.default.StatePlaying)}),n.__originalPlayer__.addEventListener(d,function(e){n.__invokeMediaStateChangeTrap__(u(n),a.default.StatePaused)}),n.__originalPlayer__.addEventListener(h,function(e){n.__invokeMediaStateChangeTrap__(u(n),a.default.StateSeeking)}),n.__originalPlayer__.addEventListener(y,function(e){n.__invokeMediaStateChangeTrap__(u(n),a.default.StateFinished)}),n.__originalPlayer__.addEventListener(v,function(e){n.__invokeMediaStateChangeTrap__(u(n),a.default.StateTimeUpdate)}),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,a["default"]),f(t,null,[{key:"Name",get:function(){return"sw-media-html-media-element"}}]),f(t,[{key:"dispose",value:function(){var e,n=(e=o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s(c(t.prototype),"dispose",this).call(this),this.__originalPlayer__.remove();case 2:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){i(a,r,o,u,s,"next",e)}function s(e){i(a,r,o,u,s,"throw",e)}u(void 0)})});return function(){return n.apply(this,arguments)}}()},{key:"play",value:function(){this.isPlaying||this.__originalPlayer__.play()}},{key:"pause",value:function(){this.isPaused||this.__originalPlayer__.pause()}},{key:"seekTo",value:function(e){s(c(t.prototype),"seekTo",this).call(this,e),this.__originalPlayer__.currentTime=e/1e3}},{key:"dispatcherName",get:function(){return t.Name}},{key:"originalPosition",get:function(){return 1e3*this.__originalPlayer__.currentTime}},{key:"volume",get:function(){return 100*this.__originalPlayer__.volume},set:function(e){var t=e/100;t<0&&(t=0),t>1&&(t=1),this.__originalPlayer__.volume=t}}]),t}();t.default=g},23:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=(n(14),n(4));function i(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return(s="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=32,d=48,h=50,y=64,v=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=c(t).call(this),(n=!o||"object"!==typeof o&&"function"!==typeof o?u(r):o).__originalPlayer__=e,n.__originalPlayer__.addEventListener("statusChange",function(e){switch(n.__invokeMediaStateChangeTrap__(u(n),a.default.StateTimeUpdate),e.playerStatus<<4|e.seekStatus<<0){case _:n.__invokeMediaStateChangeTrap__(u(n),a.default.StatePlaying);break;case d:if(n.isSeeking)return;n.__invokeMediaStateChangeTrap__(u(n),a.default.StatePaused);break;case h:n.__invokeMediaStateChangeTrap__(u(n),a.default.StateSeeking);break;case y:n.__invokeMediaStateChangeTrap__(u(n),a.default.StateFinished)}}),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,a["default"]),f(t,null,[{key:"Name",get:function(){return"sw-media-nn-video"}}]),f(t,[{key:"dispose",value:function(){var e,n=(e=o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s(c(t.prototype),"dispose",this).call(this),this.__originalPlayer__.dispose();case 2:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){i(a,r,o,u,s,"next",e)}function s(e){i(a,r,o,u,s,"throw",e)}u(void 0)})});return function(){return n.apply(this,arguments)}}()},{key:"play",value:function(){this.isPlaying||this.__originalPlayer__.play()}},{key:"pause",value:function(){this.isPaused||this.__originalPlayer__.pause()}},{key:"seekTo",value:function(e){s(c(t.prototype),"seekTo",this).call(this,e),this.__originalPlayer__.currentTime(e)}},{key:"dispatcherName",get:function(){return t.Name}},{key:"originalPosition",get:function(){return this.__originalPlayer__.currentTime()}},{key:"volume",get:function(){return 100*this.__originalPlayer__.volume()},set:function(e){var t=e/100;t<0&&(t=0),t>1&&(t=1),this.__originalPlayer__.volume(t)}}]),t}();t.default=v},24:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=(n(14),n(4));function i(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return(s="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=1,d=2,h=3,y=0,v=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=c(t).call(this),(n=!o||"object"!==typeof o&&"function"!==typeof o?u(r):o).__originalPlayer__=e.target,n.__originalPlayer__.addEventListener("onStateChange",function(e){switch(n.__invokeMediaStateChangeTrap__(u(n),a.default.StateTimeUpdate),e.data){case _:n.__invokeMediaStateChangeTrap__(u(n),a.default.StatePlaying);break;case d:n.__invokeMediaStateChangeTrap__(u(n),a.default.StatePaused);break;case h:n.__invokeMediaStateChangeTrap__(u(n),a.default.StateSeeking);break;case y:n.__invokeMediaStateChangeTrap__(u(n),a.default.StateFinished)}}),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,a["default"]),f(t,null,[{key:"Name",get:function(){return"sw-media-yt-video"}}]),f(t,[{key:"dispose",value:function(){var e,n=(e=o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s(c(t.prototype),"dispose",this).call(this),this.__originalPlayer__.destroy();case 2:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){i(a,r,o,u,s,"next",e)}function s(e){i(a,r,o,u,s,"throw",e)}u(void 0)})});return function(){return n.apply(this,arguments)}}()},{key:"play",value:function(){this.isPlaying||this.__originalPlayer__.playVideo()}},{key:"pause",value:function(){this.isPaused||this.__originalPlayer__.pauseVideo()}},{key:"seekTo",value:function(e){s(c(t.prototype),"seekTo",this).call(this,e),this.__originalPlayer__.seekTo(e/1e3)}},{key:"dispatcherName",get:function(){return t.Name}},{key:"originalPosition",get:function(){return 1e3*this.__originalPlayer__.getCurrentTime()}},{key:"volume",get:function(){return this.__originalPlayer__.getVolume()},set:function(e){var t=e;t<0&&(t=0),t>100&&(t=100),this.__originalPlayer__.setVolume(t)}}]),t}();t.default=v},25:function(e,t,n){"use strict";n.r(t);var r=n(6),o=n(3),a=n(0);var i={getClock:function(e){var t=e.player,n=e.accessToken;return e.secretToken,new Promise(function(e,i){var u=[];if(u.push("syntax=camelcase"),a.default.stringIsBlank(n))return i(o.default.createAccessTokenError(t));r.default.getJSON("".concat(a.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(n,"/clock.json?").concat(u.join("&"))).then(function(n){if(200!=n.meta.status)return i(o.default.createError(t,n));e(n.data.attributes.time)},function(e){i(e)})})},getMessage:function(e){var t=e.player,n=e.accessToken;return e.secretToken,new Promise(function(e,i){var u=[];if(u.push("syntax=camelcase"),a.default.stringIsBlank(n))return i(o.default.createAccessTokenError(t));r.default.getJSON("".concat(a.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(n,"/message.json?").concat(u.join("&"))).then(function(n){if(200!=n.meta.status)return i(o.default.createError(t,n));e(n.data)},function(e){i(e)})})},getStage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.player,i=e.accessToken;return e.secretToken,new Promise(function(e,u){var s=null!=t.nodeTimeoutThresholdMs?t.nodeTimeoutThresholdMs:60,c=[];if(c.push("syntax=camelcase"),c.push("node_timeout_threshold_ms=".concat(s)),a.default.stringIsBlank(i))return u(o.default.createAccessTokenError(n));r.default.getJSON("".concat(a.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(i,".json?").concat(c.join("&"))).then(function(t){if(200!=t.meta.status)return u(o.default.createError(n,t));e(t.data)},function(e){u(e)})})},getStageReservation:function(e){return new Promise(function(e,t){})},getStageLog:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.player,i=e.accessToken;return e.secretToken,new Promise(function(e,u){var s=null!=t.nodeTimeoutThresholdMs?t.nodeTimeoutThresholdMs:60,c=null!=t.perSecond?t.perSecond:60,l=null!=t.timeGte?t.timeGte:"",f=null!=t.timeLte?t.timeLte:"",p=[];if(p.push("syntax=camelcase"),p.push("node_timeout_threshold_ms=".concat(s)),p.push("per_sec=".concat(c)),p.push("gte_datetime=".concat(encodeURIComponent(l))),p.push("lte_datetime=".concat(encodeURIComponent(f))),a.default.stringIsBlank(i))return u(o.default.createAccessTokenError(n));r.default.getJSON("".concat(a.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(i,"/histories.json?").concat(p.join("&"))).then(function(t){if(200!=t.meta.status)return u(o.default.createError(n,t));e(t.data)},function(e){u(e)})})},postMessage:function(e,t){var n=e.player,i=e.accessToken,u=e.secretToken;return new Promise(function(e,s){var c={};return a.default.stringIsBlank(i)?s(o.default.createAccessTokenError(n)):a.default.stringIsBlank(u)?s(o.default.createSecretTokenError(n)):(c.syntax="camelcase",c.access_token=i,c.secret_token=u,c.data=t,void r.default.putJSON("".concat(a.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(i,"/message.json"),c).then(function(t){if(200!=t.meta.status)return s(o.default.createError(n,t));e(t.data)},function(e){s(e)}))})},postStage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.player,i=e.accessToken,u=e.secretToken;return new Promise(function(e,s){var c=null!=t.nodeTimeoutThresholdMs?t.nodeTimeoutThresholdMs:60,l={};return a.default.stringIsBlank(i)?s(o.default.createAccessTokenError(n)):a.default.stringIsBlank(u)?s(o.default.createSecretTokenError(n)):(l.syntax="camelcase",l.access_token=i,l.secret_token=u,l.node_timeout_threshold_ms=c,null!=t.preventGlobalClockTimeUpdate&&(l.prevent_global_clock_time_update=t.preventGlobalClockTimeUpdate),null!=t.absoluteGlobalClockTime&&(l.absolute_global_clock_time=t.absoluteGlobalClockTime),null!=t.relativeGlobalClockTime&&(l.relative_global_clock_time=t.relativeGlobalClockTime),null!=t.mediaSourceUrl&&(l.media_source_url=t.mediaSourceUrl),null!=t.stateId&&(l.state_id=t.stateId),null!=t.duration&&(l.duration=t.duration),null!=t.position&&(l.position=t.position),void r.default.putJSON("".concat(a.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(i,".json"),l).then(function(t){if(200!=t.meta.status)return s(o.default.createError(n,t));e(t.data)},function(e){s(e)}))})},postStageReservation:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.player,i=e.accessToken,u=e.secretToken;return new Promise(function(e,s){var c={};return a.default.stringIsBlank(i)?s(o.default.createAccessTokenError(n)):a.default.stringIsBlank(u)?s(o.default.createSecretTokenError(n)):(c.syntax="camelcase",c.access_token=i,c.secret_token=u,null!=t.globalClockTime&&(c.global_clock_time=t.globalClockTime),null!=t.mediaSourceUrl&&(c.media_source_url=t.mediaSourceUrl),null!=t.stateId&&(c.state_id=t.stateId),null!=t.position&&(c.position=t.position),void r.default.postJSON("".concat(a.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(i,"/reservations.json"),c).then(function(t){if(200!=t.meta.status)return s(o.default.createError(n,t));e(t.data)},function(e){s(e)}))})},postStageLog:function(e){return new Promise(function(t,n){var o={};o.stage_id=e.stageId,o.node_id=e.nodeId,o.access_token=e.accessToken,o.secret_token=e.secretToken,o.is_master=e.isMaster,o.referer=a.default.referer,o.user_agent=a.default.userAgent,r.default.postJSON("".concat(a.default.defaultLogServerEndpoint,"/songle-api.stage-logs"),o).then(function(e){t(e)},function(e){n(e)})})},deleteStageReservation:function(e,t){var n=e.player,i=e.accessToken,u=e.secretToken;return new Promise(function(e,s){var c={};return a.default.stringIsBlank(i)?s(o.default.createAccessTokenError(n)):a.default.stringIsBlank(u)?s(o.default.createSecretTokenError(n)):(c.syntax="camelcase",c.access_token=i,c.secret_token=u,void r.default.deleteJSON("".concat(a.default.defaultAppServerEndpoint,"/api/v2/stages/").concat(i,"/reservations/").concat(t,".json"),c).then(function(t){if(200!=t.meta.status)return s(o.default.createError(n,t));e(t.data)},function(e){s(e)}))})}};t.default=i},26:function(e,t,n){"use strict";n.r(t);var r=n(8),o=n(0),a="https://secure-dcdn.cdn.nimg.jp/extplayerv/embed/js/api.js";var i={importClass:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(t,n){if(o.default.NNFactoryClass)t(o.default.NNFactoryClass);else{var i=e.rootElement||o.default.global.document.body;o.default.global.onNicoPlayerFactoryReady=function(e){o.default.NNFactoryClass=e||o.default.global.NN},i.appendChild(r.default.createScriptElement(a,{onAbort:function(e){n()},onError:function(e){n()},onLoad:function(e){var n=setInterval(function(){(o.default.NNFactoryClass||o.default.global.NN)&&(o.default.NNFactoryClass=o.default.NNFactoryClass||o.default.global.NN,"0"!=o.default.NNFactoryClass.create&&(clearInterval(n),t(o.default.NNFactoryClass)))},1)}}))}})}};t.default=i},27:function(e,t,n){"use strict";n.r(t);var r=n(8),o=n(0),a="https://www.youtube.com/iframe_api";var i={importClass:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(t,n){if(o.default.YTFactoryClass)t(o.default.YTFactoryClass);else{var i=e.rootElement||o.default.global.document.body;o.default.global.onYouTubeIframeAPIReady=function(e){o.default.YTFactoryClass=e||o.default.global.YT},i.appendChild(r.default.createScriptElement(a,{onAbort:function(e){n()},onError:function(e){n()},onLoad:function(e){var n=setInterval(function(){(o.default.YTFactoryClass||o.default.global.YT)&&(o.default.YTFactoryClass=o.default.YTFactoryClass||o.default.global.YT,"0"!=o.default.YTFactoryClass.loaded&&(clearInterval(n),t(o.default.YTFactoryClass)))},1)}}))}})}};t.default=i},28:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=(n(14),n(4)),i=n(22),u=n(23),s=n(24),c=n(8),l=n(26),f=(n(37),n(27)),p=n(9),_=(n(7),n(0));function d(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){d(a,r,o,i,u,"next",e)}function u(e){d(a,r,o,i,u,"throw",e)}i(void 0)})}}var y="https",v="songle.jp",g="/songs/",m="^nn:\\/\\/([\\w-]+)$",k="n.+watch\\/(.{2}(.+))",b="^yt:\\/\\/([\\w-]+)$",T="y.+watch\\?(.{2}(.+))";function w(){return(w=h(o.a.mark(function e(t,n){var r,i,u,s,c,l=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(r=l.length>2&&void 0!==l[2]?l[2]:{}).showCtrl=null!=r.showCtrl&&r.showCtrl,r.showInfo=null!=r.showInfo&&r.showInfo,r.videoSizeW=null!=r.videoSizeW?r.videoSizeW:a.default.DefaultVideoPlayerSizeW,r.videoSizeH=null!=r.videoSizeH?r.videoSizeH:a.default.DefaultVideoPlayerSizeH,n=_.default.global.decodeURIComponent(n),i=n.match(m),u=n.match(k),s=n.match(b),c=n.match(T),e.t0=!0,e.next=e.t0===!!i?13:e.t0===!!u?17:e.t0===!!s?21:e.t0===!!c?25:29;break;case 13:return r.videoId=null!=r.videoId?r.videoId:i[1],e.next=16,new S(t,n,r);case 16:return e.abrupt("return",e.sent);case 17:return r.videoId=null!=r.videoId?r.videoId:u[1],e.next=20,new S(t,n,r);case 20:return e.abrupt("return",e.sent);case 21:return r.videoId=null!=r.videoId?r.videoId:s[1],e.next=24,new E(t,n,r);case 24:return e.abrupt("return",e.sent);case 25:return r.videoId=null!=r.videoId?r.videoId:c[2],e.next=28,new E(t,n,r);case 28:return e.abrupt("return",e.sent);case 29:return e.next=31,new M(t,n,r);case 31:return e.abrupt("return",e.sent);case 32:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(e,t){return P.apply(this,arguments)}function P(){return(P=h(o.a.mark(function e(t,n){var r,a,i=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e.next=3,p.default.MusicMap.getSong(n);case 3:return a=e.sent,e.abrupt("return",new Promise(function(e){var t=null!=r.rootElement?r.rootElement:_.default.global.document.body;l.default.importClass().then(function(n){n.create(t,r.videoId,{autoplay:!1,defaultNoComment:!0,noController:!r.showCtrl,noHeader:!r.showInfo,noLinkToNiconico:!0,noRelatedVideo:!0,noShare:!0,noTags:!0,width:r.videoSizeW,height:r.videoSizeH,onError:function(e){r.onMediaFactoryError&&r.onMediaFactoryError(e)},onSuccess:function(t){r.onMediaFactoryReady&&r.onMediaFactoryReady(t);var n=new u.default(t);n.sourceUrl=a.attributes.permalink,e(n)}})})}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function E(e,t){return O.apply(this,arguments)}function O(){return(O=h(o.a.mark(function e(t,n){var r,a,i,u,c,l=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:{},null!=r.rootElement?r.rootElement:_.default.global.document.body,a=_.default.stringIsBlank(r.endpointProtocol)?y:r.endpointProtocol||y,i=_.default.stringIsBlank(r.endpointHost)?v:r.endpointHost||v,u=_.default.stringIsBlank(r.endpointPath)?g:r.endpointPath||g,e.next=7,p.default.MusicMap.getSong(n,{endpointProtocol:a,endpointHost:i,endpointPath:u}).catch(function(e){r.onMediaFactoryError&&r.onMediaFactoryError(e)});case 7:return c=e.sent,e.abrupt("return",new Promise(function(e,t){var o=null!=r.rootElement?r.rootElement:_.default.global.document.body;f.default.importClass().then(function(a){new a.Player(o,{events:{onError:function(e){r.onMediaFactoryError&&r.onMediaFactoryError(e),t(e)},onReady:function(t){r.onMediaFactoryReady&&r.onMediaFactoryReady(t),t.target.setPlaybackQuality("tiny");var o=new s.default(t);o.sourceUrl=c?c.attributes.permalink:n,e(o)}},playerVars:{autohide:"0",autoplay:"0",cc_load_policy:"0",controls:r.showCtrl?"1":"0",disablekb:"1",enablejsapi:"1",fs:"0",hl:"0",html5:"1",iv_load_policy:"3",loop:"0",modestbranding:"1",playsinline:"1",rel:"0",showinfo:r.showInfo?"1":"0",vq:"tiny",start:.01},videoId:r.videoId,width:r.videoSizeW,height:r.videoSizeH})})}));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function M(e,t){return x.apply(this,arguments)}function x(){return(x=h(o.a.mark(function e(t,n){var r,a,u,s,l,f,d=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>2&&void 0!==d[2]?d[2]:{},a=null!=r.rootElement?r.rootElement:_.default.global.document.body,u=_.default.stringIsBlank(r.endpointProtocol)?y:r.endpointProtocol||y,s=_.default.stringIsBlank(r.endpointHost)?v:r.endpointHost||v,l=_.default.stringIsBlank(r.endpointPath)?g:r.endpointPath||g,e.next=7,p.default.MusicMap.getSong(n,{endpointProtocol:u,endpointHost:s,endpointPath:l}).catch(function(e){r.onMediaFactoryError&&r.onMediaFactoryError(e)});case 7:return f=e.sent,e.abrupt("return",new Promise(function(e,t){var n=r.src?r.src:"".concat(u,"://").concat(s).concat(l).concat(f.attributes.code,"/u"),o=c.default.createHTMLAudioElement(n);a.appendChild(o),o.addEventListener("error",function(e){r.onMediaFactoryError&&r.onMediaFactoryError(e),t(e)}),o.addEventListener("loadstart",function(t){r.onMediaFactoryReady&&r.onMediaFactoryReady(t);var n=new i.default(o);n.sourceUrl=f.attributes.permalink,e(n)})}));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}var C={createMedia:function(e,t){return w.apply(this,arguments)}};t.default=C},3:function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.assign(t,n);return"string"!=typeof e&&e&&e.invokeTrap("error",{data:r}),r}n.r(t);var o={createError:r,createMediaSourceError:function(e){return r(e,{message:"Maybe 'mediaSource' is invalid. please check 'Songle.Player#useMedia' in your code."})},createAccessTokenError:function(e){return r(e,{message:"Maybe 'accessToken' is invalid. please check 'Songle.Player.accessToken' in your code."})},createSecretTokenError:function(e){return r(e,{message:"Maybe 'secretToken' is invalid. please check 'Songle.Player.secretToken' in your code."})}};t.default=o},30:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=n(7);n(0);function i(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__timeoutDone__=!0,n.intervalTime=null!=n.intervalTime?n.intervalTime:this.defaultIntervalTime,this.minIntervalTime>n.intervalTime&&a.default.warn("You can't set less than 'minIntervalTime'"),this.maxIntervalTime<n.intervalTime&&a.default.warn("You can't set more than 'maxIntervalTime'"),this.__songleSyncPlugin__=t,this.intervalTime=n.intervalTime}var t,n,r;return t=e,(n=[{key:"start",value:function(){var e=this;this.__timeoutDone__&&(this.__timeoutDone__=!1,this.__timeoutId__=setTimeout(function(){try{e.runTask()}catch(t){a.default.error("Worker is aborted.")}e.intervalTime=e.nextIntervalTime,e.__timeoutDone__=!0,e.start()},this.intervalTime))}},{key:"runTask",value:function(){var e,t=(e=o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){i(a,r,o,u,s,"next",e)}function s(e){i(a,r,o,u,s,"throw",e)}u(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"dispose",value:function(){clearTimeout(this.__timeoutId__),this.__timeoutDone__=!0}},{key:"wait",value:function(e){return new Promise(function(t,n){setTimeout(t,e)})}},{key:"defaultIntervalTime",get:function(){return 0}},{key:"minIntervalTime",get:function(){return 0}},{key:"maxIntervalTime",get:function(){return 0}},{key:"intervalTime",set:function(e){e<this.minIntervalTime&&(e=this.minIntervalTime),e>this.maxIntervalTime&&(e=this.maxIntervalTime),this.__intervalTime__=e},get:function(){return this.__intervalTime__}},{key:"songleSyncPlugin",get:function(){return this.__songleSyncPlugin__}},{key:"nextIntervalTime",get:function(){return this.intervalTime}}])&&u(t.prototype,n),r&&u(t,r),e}();t.default=s},36:function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r=l;return function(o,a){if(r===p)throw new Error("Generator is already running");if(r===_){if("throw"===o)throw a;return x()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var u=S(i,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var s=c(e,t,n);if("normal"===s.type){if(r=n.done?_:f,s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=_,n.method="throw",n.arg=s.arg)}}}(e,n,i),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}e.wrap=s;var l="suspendedStart",f="suspendedYield",p="executing",_="completed",d={};function h(){}function y(){}function v(){}var g={};g[a]=function(){return this};var m=Object.getPrototypeOf,k=m&&m(m(M([])));k&&k!==n&&r.call(k,a)&&(g=k);var b=v.prototype=h.prototype=Object.create(g);function T(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function w(e){var t;this._invoke=function(n,o){function a(){return new Promise(function(t,a){!function t(n,o,a,i){var u=c(e[n],e,o);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"===typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,a,i)},function(e){t("throw",e,a,i)}):Promise.resolve(l).then(function(e){s.value=e,a(s)},function(e){return t("throw",e,a,i)})}i(u.arg)}(n,o,t,a)})}return t=t?t.then(a,a):a()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return d;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=c(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,d;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,d):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function M(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:x}}function x(){return{value:t,done:!0}}return y.prototype=b.constructor=v,v.constructor=y,v[u]=y.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},T(w.prototype),w.prototype[i]=function(){return this},e.AsyncIterator=w,e.async=function(t,n,r,o){var a=new w(s(t,n,r,o));return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},T(b),b[u]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=M,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:M(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),d}},e}(e.exports);try{regeneratorRuntime=r}catch(o){Function("r","regeneratorRuntime = r")(r)}},37:function(e,t,n){"use strict";n.r(t);var r=n(8),o=(n(7),n(0)),a="https://w.soundcloud.com/player/api.js";var i={importClass:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(t,n){o.default.ScFactoryClass?t(o.default.ScFactoryClass):(e.rootElement||o.default.global.document.body).appendChild(r.default.createScriptElement(a,{onAbort:function(e){n()},onError:function(e){n()},onLoad:function(e){o.default.ScFactoryClass=o.default.global.SC}}))})}};t.default=i},379:function(e,t,n){"use strict";n.r(t);var r=n(14),o=n(155),a=(n(171),n(4)),i=n(18),u=n(42),s=n(22),c=n(23),l=n(24),f=n(156),p=n(157),_=n(158),d=n(159),h=n(160),y=n(77),v=n(78),g=(n(7),n(0)),m=(n(9),{Player:r.default,SyncPlayer:o.default,Media:{SuperClass:a.default,Headless:u.default,HTMLMediaElement:s.default,NNVideo:c.default,YTVideo:l.default},Plugin:{SuperClass:i.default,Beat:f.default,Chord:p.default,Melody:_.default,Chorus:d.default,Variation:h.default,SongleSync:y.default,SongleWidget:v.default},System:g.default}),k=20;g.default.global.SW=g.default.global.SW||m,g.default.global.Songle=g.default.global.Songle||m,g.default.showDebugLog=!1,g.default.showErrorLog=!0,g.default.showLicense=!0,function e(){setTimeout(function(){g.default.global.SWAPIReady||k<=0||(k--,g.default.global.onSongleWidgetAPIReady&&(g.default.global.onSongleWidgetAPIReady(m),g.default.global.SWAPIReady=!0),g.default.global.onSongleAPIReady&&(g.default.global.onSongleAPIReady(m),g.default.global.SWAPIReady=!0),e())},500)}(),t.default=m},38:function(e,t,n){"use strict";function r(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);for(var r in t)null!=t[r]&&n.setAttribute(o(r),String(t[r]));return n}function o(e){switch(e){case"strokeWidth":e="stroke-width"}return e}n.r(t);var a={createSVGElement:function(e){return r("svg",e)},createGroupElement:function(e){return r("g",e)},createRectElement:function(e){return r("rect",e)},createCircleElement:function(e){return r("circle",e)},createLineElement:function(e){return r("line",e)},createPolygonElement:function(e){return r("polygon",e)}};t.default=a},4:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=n(13),i=n(7),u=n(9),s=n(0);function c(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t,n){return(p="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=!0,y=!1,v=!0,g=!1,m=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=f(this,(e=_(t)).call.apply(e,[this].concat(o)))).__stateIsReady__=h,n.__stateIsPlaying__=y,n.__stateIsPaused__=v,n.__stateIsSeeking__=g,n.__duration__=0,n.__seekTimeHistories__=[],n.sourceUrl="",n.__clockUpdateTime__=0,n.__clockAdjustTime__=0,n}var n,r,m;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,a["default"]),n=t,r=[{key:"initialize",value:function(){var e,n=(e=o.a.mark(function e(n){var r,a,c,l,f,d=this,h=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},p(_(t.prototype),"initialize",this).call(this,n),a=0,c=0,l=0,this.on("mediaStateChange",function(e){switch(e.data.mediaStateId){case t.StatePlaying:i.default.debug("Media state change to 'playing'"),c=s.default.currentTimeToMilliseconds,l=0==a?0:c-a,d.__seekTimeHistories__.push(l),d.player.invokeTrap("mediaSeek",{target:e.target,data:{position:d.originalPosition,seekTime:l}}),a=0,c=0,l=0,d.isPaused&&d.player.invokeTrap("mediaPlay",{target:e.target}),d.__setMediaState__(t.StatePlaying);break;case t.StatePaused:i.default.debug("Media state change to 'paused'"),c=s.default.currentTimeToMilliseconds,l=0==a?0:c-a,d.__seekTimeHistories__.push(l),d.player.invokeTrap("mediaSeek",{target:e.target,data:{position:d.originalPosition,seekTime:l}}),a=0,c=0,l=0,d.isPaused||d.player.invokeTrap("mediaPause",{target:e.target}),d.__setMediaState__(t.StatePaused);break;case t.StateSeeking:i.default.debug("Media state change to 'seeking'"),a=s.default.currentTimeToMilliseconds,d.__setMediaState__(t.StateSeeking);break;case t.StateFinished:i.default.debug("Media state change to 'finished'"),d.player.invokeTrap("mediaFinish",{target:e.target}),d.__setMediaState__(t.StatePaused);break;case t.StateTimeUpdate:d.__adjustMediaPosition__();break;default:i.default.debug("Unknown media state (ID: "+e.data.mediaStateId+")")}}),this.on("mediaReady",function(e){i.default.debug("Invoke 'mediaReady'"),d.player.invokeTrap("ready",e)}),this.on("mediaPlay",function(e){i.default.debug("Invoke 'mediaPlay'"),d.player.invokeTrap("play",e)}),this.on("mediaPause",function(e){i.default.debug("Invoke 'mediaPause'"),d.player.invokeTrap("pause",e)}),this.on("mediaSeek",function(e){i.default.debug("Invoke 'mediaSeek' (seek time: "+e.data.seekTime+" [ms])")}),this.on("mediaFinish",function(e){i.default.debug("Invoke 'mediaFinish'"),d.player.invokeTrap("finish",e),d.__clockUpdateTime__=s.default.currentTimeToMilliseconds,d.__clockAdjustTime__=0}),this.on("seek",function(e){d.seekTo(e.data.position)}),e.next=14,u.default.MusicMap.getSong(this.player,{endpointProtocol:r.endpointProtocol,endpointHost:r.endpointHost,endpointPath:r.endpointPath});case 14:f=e.sent,this.sourceUrl=f.attributes.permalink,this.__duration__=f.attributes.durationTimeMs,this.__name__=f.attributes.name,this.__artistName__=f.relationships.artist.data.attributes.name;case 19:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,u,"next",e)}function u(e){c(a,r,o,i,u,"throw",e)}i(void 0)})});return function(e){return n.apply(this,arguments)}}()},{key:"play",value:function(){}},{key:"pause",value:function(){}},{key:"seekTo",value:function(e){this.__clockUpdateTime__=s.default.currentTimeToMilliseconds,this.__clockAdjustTime__=e}},{key:"__adjustMediaPosition__",value:function(){this.__clockUpdateTime__=s.default.currentTimeToMilliseconds,this.__clockAdjustTime__=this.originalPosition}},{key:"__invokeMediaStateChangeTrap__",value:function(e,t){this.player.invokeTrap("mediaStateChange",{target:e,data:{mediaStateId:t,position:this.originalPosition}})}},{key:"__setMediaState__",value:function(e){switch(e){case t.StatePlaying:this.__stateIsReady__=!1,this.__stateIsPlaying__=!0,this.__stateIsPaused__=!1,this.__stateIsSeeking__=!1;break;case t.StatePaused:this.__stateIsReady__=!1,this.__stateIsPlaying__=!1,this.__stateIsPaused__=!0,this.__stateIsSeeking__=!1;break;case t.StateSeeking:this.__stateIsReady__=!1,this.__stateIsSeeking__=!0}}},{key:"dispatcherName",get:function(){return t.Name}},{key:"dispatcherType",get:function(){return t.Type}},{key:"name",get:function(){return this.__name__}},{key:"artistName",get:function(){return this.__artistName__}},{key:"isReady",get:function(){return this.__stateIsReady__}},{key:"isPlaying",get:function(){return this.__stateIsPlaying__}},{key:"isPaused",get:function(){return this.__stateIsPaused__}},{key:"isSeeking",get:function(){return this.__stateIsSeeking__}},{key:"medianSeekTime",get:function(){var e=this.__seekTimeHistories__.sort(function(e,t){return e-t});return Math.abs(e[Math.floor(e.length/2)]||0)}},{key:"duration",get:function(){return this.__duration__}},{key:"originalDuration",get:function(){return this.duration}},{key:"position",get:function(){var e=s.default.currentTimeToMilliseconds-this.__clockUpdateTime__,t=this.__clockAdjustTime__+(this.isPlaying?e:0);return t<0&&(t=0),t>this.duration&&(t=this.duration),t}},{key:"originalPosition",get:function(){return this.position}},{key:"loadedRatio",get:function(){return 0}},{key:"playedRatio",get:function(){return 0==this.duration?0:this.position/this.duration}},{key:"volume",get:function(){return 0},set:function(e){}}],m=[{key:"Name",get:function(){return"media"}},{key:"Type",get:function(){return"media"}},{key:"DefaultIsReady",get:function(){return h}},{key:"DefaultIsPlaying",get:function(){return y}},{key:"DefaultIsPaused",get:function(){return v}},{key:"DefaultIsSeeking",get:function(){return g}},{key:"StateReady",get:function(){return 0}},{key:"StatePlaying",get:function(){return 1}},{key:"StatePaused",get:function(){return 2}},{key:"StateSeeking",get:function(){return 3}},{key:"StateFinished",get:function(){return 4}},{key:"StateTimeUpdate",get:function(){return 5}}],r&&l(n.prototype,r),m&&l(n,m),t}();m.DefaultVideoPlayerSizeW=256,m.DefaultVideoPlayerSizeH=144;var k=m;t.default=k},42:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=n(4);n(14);function i(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return(s="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=c(t).call(this),(n=!o||"object"!==typeof o&&"function"!==typeof o?u(r):o).sourceUrl=e,n.__intervalId__=setInterval(function(){n.position>=n.duration&&n.__invokeMediaStateChangeTrap__(u(n),a.default.StateFinished)},1e3),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,a["default"]),f(t,null,[{key:"Name",get:function(){return"sw-media-headless"}}]),f(t,[{key:"dispose",value:function(){var e,n=(e=o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s(c(t.prototype),"dispose",this).call(this),clearInterval(this.__intervalId__);case 2:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){i(a,r,o,u,s,"next",e)}function s(e){i(a,r,o,u,s,"throw",e)}u(void 0)})});return function(){return n.apply(this,arguments)}}()},{key:"play",value:function(){this.__invokeMediaStateChangeTrap__(this,a.default.StatePlaying),this.__invokeMediaStateChangeTrap__(this,a.default.StateTimeUpdate)}},{key:"pause",value:function(){this.__invokeMediaStateChangeTrap__(this,a.default.StatePaused),this.__invokeMediaStateChangeTrap__(this,a.default.StateTimeUpdate)}},{key:"seekTo",value:function(e){switch(s(c(t.prototype),"seekTo",this).call(this,e),!0){case this.isPlaying:this.__invokeMediaStateChangeTrap__(this,a.default.StateSeeking),this.__invokeMediaStateChangeTrap__(this,a.default.StatePlaying),this.__invokeMediaStateChangeTrap__(this,a.default.StateTimeUpdate);break;case this.isPaused:this.__invokeMediaStateChangeTrap__(this,a.default.StateSeeking),this.__invokeMediaStateChangeTrap__(this,a.default.StatePaused),this.__invokeMediaStateChangeTrap__(this,a.default.StateTimeUpdate);break;case this.isSeeking:}}},{key:"dispatcherName",get:function(){return t.Name}}]),t}();t.default=_},43:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__player__=t}var t,n,o;return t=e,(n=[{key:"dispatch",value:function(e,t,n){}},{key:"find",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null!=t.offset?t.offset:0,r=this.__player__.position-250+-1*n,o=this.__player__.position+0+-1*n;this.dispatch(r,o,e)}},{key:"reset",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}])&&r(t.prototype,n),o&&r(t,o),e}();t.default=o},45:function(e,t,n){"use strict";n.r(t);var r=500;function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return e.musicMap.chorus&&e.musicMap.chorus.forEach(function(e){t.chorusOnly&&!e.isChorus||(n=n.concat(e.items).sort(function(e,t){return e.startTimeMs-t.startTimeMs}))}),n}var a={findPrevBar:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null!=t.startTimeMs?t.startTimeMs:e.position,o=e.musicMap.beats||[];o=o.reverse();for(var a=0;a<o.length;++a)if(1==o[a].position&&n>o[a].startTimeMs+r)return o[a];return o[0]},findNextBar:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null!=t.startTimeMs?t.startTimeMs:e.position,o=e.musicMap.beats||[],a=0;a<o.length;++a)if(1==o[a].position&&n<o[a].startTimeMs-r)return o[a];return o[0]},findPrevRepeatedSectionItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null!=t.startTimeMs?t.startTimeMs:e.position,a=o(e,t);a=a.reverse();for(var i=0;i<a.length;++i)if(n>a[i].startTimeMs+r)return a[i];return a[0]},findNextRepeatedSectionItem:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null!=t.startTimeMs?t.startTimeMs:e.position,a=o(e,t),i=0;i<a.length;++i)if(n<a[i].startTimeMs-r)return a[i];return a[0]}};t.default=a},46:function(e,t,n){"use strict";n.r(t);var r=n(18);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=a(this,i(t).call(this))).endpointProtocol=null!=n.endpointProtocol?n.endpointProtocol:"",e.endpointHost=null!=n.endpointHost?n.endpointHost:"",e.endpointPath=null!=n.endpointPath?n.endpointPath:"",e.revisionId=null!=n.revisionId?n.revisionId:0,e.offset=null!=n.offset?n.offset:0,e.pollingInterval=null!=n.pollingInterval?n.pollingInterval:50,e}var n,s,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["default"]),n=t,(s=[{key:"__invokeTrap__",value:function(e,t){e.trap({target:this,type:e.name,data:t})}}])&&o(n.prototype,s),c&&o(n,c),t}();t.default=s},6:function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(r,o){var a=null!=n.method?n.method:"GET",i=null!=n.responseType?n.responseType:"",u=new XMLHttpRequest;switch(u.addEventListener("abort",function(e){o(u)},!1),u.addEventListener("error",function(e){o(u)},!1),u.addEventListener("load",function(e){r(u)},!1),u.open(a,e,!0),u.responseType=i,a){case"GET":u.send();break;default:u.setRequestHeader("Content-Type","application/json"),u.send(JSON.stringify(t))}})}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(o,i){r(e,t,{method:n.method,responseType:n.responseType}).then(function(e){var t=a(e);o(t)},function(e){var t=a(e);i(t)})})}function a(e){var t=e.responseText||e.response||"null";return JSON.parse(t)}n.r(t);var i={ajax:r,ajaxJSON:o,getJSON:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.method="GET",o(e,null,t)},postJSON:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.method="POST",o(e,t,n)},putJSON:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.method="PUT",o(e,t,n)},deleteJSON:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.method="DELETE",o(e,t,n)}};t.default=i},64:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=n(30),i=(n(42),n(9)),u=n(0);function s(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){s(a,r,o,i,u,"next",e)}function u(e){s(a,r,o,i,u,"throw",e)}i(void 0)})}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=f(this,(e=p(t)).call.apply(e,[this].concat(o)))).__histories__=[],n}var n,r,s;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,a["default"]),n=t,r=[{key:"runTask",value:function(){var e=c(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.update();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=c(o.a.mark(function e(){var t,n,r,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0,n=0,r=0,a=0;case 4:if(!(a<3)){e.next=16;break}return e.next=7,this.wait(50);case 7:return n=u.default.currentTimeToMilliseconds,e.next=10,i.default.SongleSync.getClock(this.songleSyncPlugin);case 10:t=e.sent,r=u.default.currentTimeToMilliseconds,this.__histories__.push(t-(n+r)/2);case 13:++a,e.next=4;break;case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"__random__",value:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}},{key:"defaultIntervalTime",get:function(){return t.DefaultIntervalTime}},{key:"minIntervalTime",get:function(){return t.MinIntervalTime}},{key:"maxIntervalTime",get:function(){return t.MaxIntervalTime}},{key:"nextIntervalTime",get:function(){return Math.min(2*this.intervalTime,this.maxIntervalTime)+this.__random__(0,1e3)}},{key:"globalClockTimeOffset",get:function(){return this.__histories__.sort(function(e,t){return e-t})[Math.floor(this.__histories__.length/2)]}}],s=[{key:"DefaultIntervalTime",get:function(){return 2500}},{key:"MinIntervalTime",get:function(){return 1e3}},{key:"MaxIntervalTime",get:function(){return 3e5}}],r&&l(n.prototype,r),s&&l(n,s),t}();t.default=d},65:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=n(30),i=(n(42),n(7));n(9),n(0);function u(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t,n){return(l="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=c(this,(e=f(t)).call.apply(e,[this].concat(o)))).__dones__=[],n}var n,r,_;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,a["default"]),n=t,r=[{key:"runTask",value:function(){var e,t=(e=o.a.mark(function e(){var t=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.songleSyncPlugin.reservations.forEach(function(e){var n=e.globalClockTime-t.songleSyncPlugin.globalClockTime;if(-1==t.__dones__.indexOf(e.id)&&!(n>0)&&!isNaN(n)){switch(t.songleSyncPlugin.stageWorker.__position__=0,t.songleSyncPlugin.stageWorker.__globalClockTime__=e.globalClockTime,t.songleSyncPlugin.stageWorker.__stateId__=e.stateId,e.stateId){case 1:if(t.songleSyncPlugin.isMaster&&t.songleSyncPlugin.__sync__({stateId:1,position:0}),t.songleSyncPlugin.player.isPlaying)return;t.songleSyncPlugin.player.media.play();break;case 2:if(t.songleSyncPlugin.isMaster&&t.songleSyncPlugin.__sync__({stateId:2,position:0}),t.songleSyncPlugin.player.isReady||t.songleSyncPlugin.player.isPaused)return;t.songleSyncPlugin.player.media.pause();break;default:if(t.songleSyncPlugin.isMaster&&t.songleSyncPlugin.__sync__({stateId:2,position:0}),t.songleSyncPlugin.player.isReady||t.songleSyncPlugin.player.isPaused)return;t.songleSyncPlugin.player.media.pause(),i.default.warn("Maybe 'SongleSyncPlugin.stageWorker.stateId' is broken.")}t.__dones__.push(e.id)}});case 1:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){u(a,r,o,i,s,"next",e)}function s(e){u(a,r,o,i,s,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"dispose",value:function(){l(f(t.prototype),"dispose",this).call(this),this.__dones__=[]}},{key:"defaultIntervalTime",get:function(){return t.DefaultIntervalTime}},{key:"minIntervalTime",get:function(){return t.MinIntervalTime}},{key:"maxIntervalTime",get:function(){return t.MaxIntervalTime}}],_=[{key:"DefaultIntervalTime",get:function(){return 100}},{key:"MinIntervalTime",get:function(){return 100}},{key:"MaxIntervalTime",get:function(){return 6e4}}],r&&s(n.prototype,r),_&&s(n,_),t}();t.default=_},66:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=n(30),i=(n(42),n(7),n(9));n(0);function u(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,l(t).apply(this,arguments))}var n,r,p;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,a["default"]),n=t,r=[{key:"runTask",value:function(){var e,t=(e=o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.SongleSync.postStageLog(this.songleSyncPlugin);case 2:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){u(a,r,o,i,s,"next",e)}function s(e){u(a,r,o,i,s,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"defaultIntervalTime",get:function(){return t.DefaultIntervalTime}},{key:"minIntervalTime",get:function(){return t.MinIntervalTime}},{key:"maxIntervalTime",get:function(){return t.MaxIntervalTime}}],p=[{key:"DefaultIntervalTime",get:function(){return 3e4}},{key:"MinIntervalTime",get:function(){return 15e3}},{key:"MaxIntervalTime",get:function(){return 6e4}}],r&&s(n.prototype,r),p&&s(n,p),t}();t.default=p},67:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=n(30),i=(n(42),n(22),n(23),n(24),n(7));n(9),n(0);function u(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){u(a,r,o,i,s,"next",e)}function s(e){u(a,r,o,i,s,"throw",e)}i(void 0)})}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=l(this,(e=f(t)).call.apply(e,[this].concat(o)))).__integralOffsetTime__=0,n}var n,r,u;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,a["default"]),n=t,r=[{key:"runTask",value:function(){var e=s(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.update();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=s(o.a.mark(function e(){var t,n,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.songleSyncPlugin.player,n=t.position-this.songleSyncPlugin.globalPosition,t.isPlaying&&!isNaN(n)){e.next=4;break}return e.abrupt("return");case 4:i.default.debug("currentOffsetTime: ".concat(n)),r=Math.abs(n),-50,50,r<1e3&&(this.__integralOffsetTime__+=n),n<-50?(r>1e3&&(this.__integralOffsetTime__=0),i.default.debug("integralOffsetTime: ".concat(this.__integralOffsetTime__)),t.media.seekTo(this.songleSyncPlugin.globalPosition-this.__integralOffsetTime__)):n>50&&(r>1e3?this.__integralOffsetTime__=0:this.songleSyncPlugin.isMaster||(t.media.pause(),setTimeout(function(){return t.media.play()},Math.min(100,r))),i.default.debug("integralOffsetTime: ".concat(this.__integralOffsetTime__)),t.media.seekTo(this.songleSyncPlugin.globalPosition-this.__integralOffsetTime__));case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"defaultIntervalTime",get:function(){return t.DefaultIntervalTime}},{key:"minIntervalTime",get:function(){return t.MinIntervalTime}},{key:"maxIntervalTime",get:function(){return t.MaxIntervalTime}}],u=[{key:"DefaultIntervalTime",get:function(){return 1e3}},{key:"MinIntervalTime",get:function(){return 1e3}},{key:"MaxIntervalTime",get:function(){return 6e4}}],r&&c(n.prototype,r),u&&c(n,u),t}();t.default=_},68:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=n(30),i=(n(42),n(7)),u=n(9),s=n(0);function c(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,u,"next",e)}function u(e){c(a,r,o,i,u,"throw",e)}i(void 0)})}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=p(this,(e=_(t)).call.apply(e,[this].concat(o)))).__globalClockTime__=0,n.__reservations__=[],n}var n,r,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,a["default"]),n=t,r=[{key:"runTask",value:function(){var e=l(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,u.default.SongleSync.getStage(this.songleSyncPlugin);case 3:e.t1=e.sent,e.t0.update.call(e.t0,e.t1);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=l(o.a.mark(function e(t){var n,r=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.attributes,Promise.resolve().then(function(){n.activeNodeCount>r.__activeNodeCount__&&r.__invokeNodeEnter__(n),n.activeNodeCount<r.__activeNodeCount__&&r.__invokeNodeLeave__(n),n.activeNodeCount!=r.__activeNodeCount__&&r.__invokeNodeChange__(n),n.message!=r.__message__&&r.__invokeMessage__(n),r.__stageId__=t.id,r.__activeNodeCount__=n.activeNodeCount,r.__masterNodeCount__=n.masterNodeCount,r.__globalClockTime__=n.globalClockTime,r.__duration__=n.duration,r.__position__=n.position,r.__message__=n.message,r.__reservations__.forEach(function(e){n.reservations.some(function(t){return t.id==e.id})||r.__invokeReservationRemove__(e)}),n.reservations.forEach(function(e){r.__reservations__.some(function(t){return t.id==e.id})||r.__invokeReservationCreate__(e)}),r.__reservations__=n.reservations}).then(function(){return new Promise(function(e,t){if(r.songleSyncPlugin.player.media&&r.songleSyncPlugin.player.media.sourceUrl==n.mediaSourceUrl)e();else{if(s.default.stringIsBlank(n.mediaSourceUrl))return;r.__invokeMediaChange__(n)}})}).then(function(){switch(n.stateId!=r.__stateId__&&(r.__invokeStateChange__(n),r.__stateId__=n.stateId),n.stateId){case 1:if(r.songleSyncPlugin.player.isPlaying)return;r.songleSyncPlugin.player.media.play();break;case 2:if(r.songleSyncPlugin.player.isReady||r.songleSyncPlugin.player.isPaused)return;r.songleSyncPlugin.player.media.pause();break;default:if(r.songleSyncPlugin.player.isReady||r.songleSyncPlugin.player.isPaused)return;r.songleSyncPlugin.player.media.pause(),i.default.warn("Maybe 'SongleSyncPlugin.stageWorker.stateId' is broken.")}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"__invokeReservationCreate__",value:function(e){this.songleSyncPlugin.player.invokeTrap("songleSyncReservationCreate",{target:this.songleSyncPlugin,data:{reservation:e}})}},{key:"__invokeReservationUpdate__",value:function(e){this.songleSyncPlugin.player.invokeTrap("songleSyncReservationUpdate",{target:this.songleSyncPlugin,data:{reservation:e}})}},{key:"__invokeReservationRemove__",value:function(e){this.songleSyncPlugin.player.invokeTrap("songleSyncReservationRemove",{target:this.songleSyncPlugin,data:{reservation:e}})}},{key:"__invokeNodeChange__",value:function(e){this.songleSyncPlugin.player.invokeTrap("songleSyncNodeChange",{target:this.songleSyncPlugin,data:{activeNodeCount:e.activeNodeCount,masterNodeCount:e.masterNodeCount}})}},{key:"__invokeNodeEnter__",value:function(e){this.songleSyncPlugin.player.invokeTrap("songleSyncNodeEnter",{target:this.songleSyncPlugin,data:{activeNodeCount:e.activeNodeCount,masterNodeCount:e.masterNodeCount}})}},{key:"__invokeNodeLeave__",value:function(e){this.songleSyncPlugin.player.invokeTrap("songleSyncNodeLeave",{target:this.songleSyncPlugin,data:{activeNodeCount:e.activeNodeCount,masterNodeCount:e.masterNodeCount}})}},{key:"__invokeMessage__",value:function(e){this.songleSyncPlugin.player.invokeTrap("songleSyncMessage",{target:this.songleSyncPlugin,data:{message:e.message}})}},{key:"__invokeMediaChange__",value:function(e){this.songleSyncPlugin.player.invokeTrap("songleSyncMediaChange",{target:this.songleSyncPlugin,data:{mediaSourceUrl:e.mediaSourceUrl}})}},{key:"__invokeStateChange__",value:function(e){this.songleSyncPlugin.player.invokeTrap("songleSyncStateChange",{target:this.songleSyncPlugin,data:{stateId:e.stateId}})}},{key:"defaultIntervalTime",get:function(){return t.DefaultIntervalTime}},{key:"minIntervalTime",get:function(){return t.MinIntervalTime}},{key:"maxIntervalTime",get:function(){return t.MaxIntervalTime}}],c=[{key:"DefaultIntervalTime",get:function(){return 2500}},{key:"MinIntervalTime",get:function(){return 1e3}},{key:"MaxIntervalTime",get:function(){return 6e4}}],r&&f(n.prototype,r),c&&f(n,c),t}();t.default=h},69:function(e,t,n){"use strict";n.r(t);var r=n(7),o=n(0);function a(e){try{return o.default.isStandalone?null:o.default.global.localStorage.getItem(e)}catch(t){return r.default.error(t),null}}function i(e,t){try{return o.default.isStandalone?null:o.default.global.localStorage.setItem(e,t)}catch(n){return r.default.error(n),null}}var u={fetch:function(e,t){var n=a(e)||t;return i(e,n),n},get:a,set:i};t.default=u},7:function(e,t,n){"use strict";n.r(t);var r=n(0);function o(e,t){console.log((r.default.isStandalone?"":"%c")+e,r.default.isStandalone?"":t)}var a={debug:function(e){r.default.showDebugLog&&o("[SW debug] "+e,"color:#000000;")},warn:function(e){r.default.showErrorLog&&o("[SW warn] "+e,"color:#ff8822;")},error:function(e){r.default.showErrorLog&&o("[SW error] "+e,"color:#ff2222;")}};t.default=a},70:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=n(30);n(42),n(7),n(9),n(0);function i(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,c(t).apply(this,arguments))}var n,r,f;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,a["default"]),n=t,r=[{key:"runTask",value:function(){var e,t=(e=o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.songleSyncPlugin.stageWorker.__stateId__,e.next=1===e.t0?3:2===e.t0?7:11;break;case 3:if(!this.songleSyncPlugin.player.isPlaying){e.next=5;break}return e.abrupt("return");case 5:return this.songleSyncPlugin.player.media.play(),e.abrupt("break",11);case 7:if(!this.songleSyncPlugin.player.isReady&&!this.songleSyncPlugin.player.isPaused){e.next=9;break}return e.abrupt("return");case 9:return this.songleSyncPlugin.player.media.pause(),e.abrupt("break",11);case 11:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){i(a,r,o,u,s,"next",e)}function s(e){i(a,r,o,u,s,"throw",e)}u(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"defaultIntervalTime",get:function(){return t.DefaultIntervalTime}},{key:"minIntervalTime",get:function(){return t.MinIntervalTime}},{key:"maxIntervalTime",get:function(){return t.MaxIntervalTime}}],f=[{key:"DefaultIntervalTime",get:function(){return 100}},{key:"MinIntervalTime",get:function(){return 100}},{key:"MaxIntervalTime",get:function(){return 6e4}}],r&&u(n.prototype,r),f&&u(n,f),t}();t.default=f},77:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=(n(14),n(18)),i=n(9),u=n(0),s=n(64),c=n(65),l=n(66),f=n(67),p=n(68),_=n(69),d=n(84),h=n.n(d),y=n(7),v=n(42),g=n(70);function m(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function k(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){m(a,r,o,i,u,"next",e)}function u(e){m(a,r,o,i,u,"throw",e)}i(void 0)})}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t,n){return(T="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return t&&S(e.prototype,t),n&&S(e,n),e}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=60,M=function(e){function t(){var e,n,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=w(t).call(this),(e=!r||"object"!==typeof r&&"function"!==typeof r?b(n):r).__globalPositionOffset__=0,e.endpointProtocol=null!=o.endpointProtocol?o.endpointProtocol:"",e.endpointHost=null!=o.endpointHost?o.endpointHost:"",e.endpointPath=null!=o.endpointPath?o.endpointPath:"",e.__logWorker__=new l.default(b(e),{intervalTime:o.logWorkerIntervalTime}),e.__clockWorker__=new s.default(b(e),{intervalTime:o.clockWorkerIntervalTime}),e.__stageWorker__=new p.default(b(e),{intervalTime:o.stageWorkerIntervalTime}),e.__mediaWorker__=new f.default(b(e),{intervalTime:o.mediaWorkerIntervalTime}),e.__reservationWorker__=new c.default(b(e),{intervalTime:o.reservationWorkerIntervalTime}),e.__stateWorker__=new g.default(b(e),{intervalTime:o.stateWorkerIntervalTime}),e.nodeTimeoutThreshold=null!=o.nodeTimeoutThreshold?o.nodeTimeoutThreshold:O;var a=!1;return function t(){setTimeout(function(){null==e.player.media&&(a||(e.initialize(e.player),a=!0),e.stageWorker.runTask(),t())},1e3)}(),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,a["default"]),P(t,null,[{key:"Name",get:function(){return"sw-plugin-songle-sync"}},{key:"DefaultNodeTimeoutThreshold",get:function(){return O}},{key:"MinNodeTimeoutThreshold",get:function(){return 15}},{key:"MaxNodeTimeoutThreshold",get:function(){return 3600}},{key:"StatePlaying",get:function(){return 1}},{key:"StateStopped",get:function(){return 2}}]),P(t,[{key:"initialize",value:function(){var e=k(o.a.mark(function e(n){var r=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:T(w(t.prototype),"initialize",this).call(this,n),u.default.global.Object.defineProperties(n,{isMaster:{configurable:!0,get:function(){return r.isMaster}},isSlave:{configurable:!0,get:function(){return r.isSlave}},message:{configurable:!0,get:function(){return r.__message__},set:function(e){r.__message__=e,i.default.SongleSync.postMessage(r,r.__message__)}},reservations:{configurable:!0,get:function(){return r.reservations}}}),n.play=function(){r.__play__()},n.pause=function(){r.__pause__()},n.stop=function(){r.__stop__()},n.seekTo=function(e){r.__seekTo__(e)},n.sync=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.__sync__(e)},this.on("ready",function(e){r.stateWorker.dispose(),r.reservationWorker.dispose(),r.mediaWorker.dispose(),r.stageWorker.dispose(),r.clockWorker.dispose(),r.logWorker.dispose(),Promise.resolve().then(k(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.isMaster&&i.default.SongleSync.postStage(r,{preventGlobalClockTimeUpdate:!0,mediaSourceUrl:r.player.media.sourceUrl});case 1:case"end":return e.stop()}},e)}))).then(function(){return r.logWorker.runTask()}).then(function(){return r.clockWorker.runTask()}).then(function(){return r.stageWorker.runTask()}).then(function(){return r.mediaWorker.runTask()}).then(function(){return r.reservationWorker.runTask()}).then(function(){return r.stateWorker.runTask()}).then(function(){r.logWorker.start(),r.clockWorker.start(),r.stageWorker.start(),r.mediaWorker.start(),r.reservationWorker.start(),r.stateWorker.start()})}),this.on("play",function(e){r.__sync__({preventGlobalClockTimeUpdate:!0,stateId:1})}),this.on("pause",function(e){r.__sync__({preventGlobalClockTimeUpdate:!0,stateId:2})}),this.on("finish",function(e){r.stageWorker.__stageId__=t.StateStopped}),this.on("songleSyncNodeChange",function(e){y.default.debug("Invoked '".concat(e.type,"' (active: ").concat(e.data.activeNodeCount,")"))}),this.on("songleSyncNodeEnter",function(e){y.default.debug("Invoked '".concat(e.type,"' (active: ").concat(e.data.activeNodeCount,")"))}),this.on("songleSyncNodeLeave",function(e){y.default.debug("Invoked '".concat(e.type,"' (active: ").concat(e.data.activeNodeCount,")"))}),this.on("songleSyncReservationCreate",function(e){y.default.debug("Invoked '".concat(e.type,"' (ID: ").concat(e.data.reservation.id,")"))}),this.on("songleSyncReservationUpdate",function(e){y.default.debug("Invoked '".concat(e.type,"' (ID: ").concat(e.data.reservation.id,")"))}),this.on("songleSyncReservationRemove",function(e){y.default.debug("Invoked '".concat(e.type,"' (ID: ").concat(e.data.reservation.id,")"))}),this.on("songleSyncMessage",function(e){y.default.debug("Invoked '".concat(e.type,"'")),r.__message__=e.data.message}),this.on("songleSyncMediaChange",function(e){y.default.debug("Invoked '".concat(e.type,"'")),r.player.useMedia(r.player.mediaElement?e.data.mediaSourceUrl:new v.default(e.data.mediaSourceUrl),{endpointProtocol:r.endpointProtocol,endpointHost:r.endpointHost,endpointPath:r.endpointPath})}),this.on("songleSyncStateChange",function(e){y.default.debug("Invoked '".concat(e.type,"' (state: ").concat(e.data.stateId,")"))});case 20:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){var e=k(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null!=this.stateWorker&&this.stateWorker.dispose(),null!=this.reservationWorker&&this.reservationWorker.dispose(),null!=this.mediaWorker&&this.mediaWorker.dispose(),null!=this.stageWorker&&this.stageWorker.dispose(),null!=this.clockWorker&&this.clockWorker.dispose(),null!=this.logWorker&&this.logWorker.dispose(),T(w(t.prototype),"dispose",this).call(this);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"__play__",value:function(){var e=k(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.__sync__({stateId:1,position:this.globalPosition});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"__pause__",value:function(){var e=k(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.__sync__({stateId:2,position:this.globalPosition});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"__stop__",value:function(){var e=k(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.__sync__({stateId:2,position:0});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"__seekTo__",value:function(){var e=k(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.__sync__({stateId:this.player.isPlaying?1:2,position:t});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"__sync__",value:function(){var e=k(o.a.mark(function e(){var t,n,r=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:{},!this.isSlave){e.next=3;break}return e.abrupt("return");case 3:return null==t.mediaSourceUrl&&(t.mediaSourceUrl=this.player.media.sourceUrl),null==t.duration&&(t.duration=this.player.duration),e.next=7,i.default.SongleSync.postStage(this,t);case 7:n=e.sent,this.__globalPositionOffset__=0,this.stageWorker.update(n),this.mediaWorker.update();case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"dispatcherName",get:function(){return t.Name}},{key:"logWorker",get:function(){return this.__logWorker__}},{key:"clockWorker",get:function(){return this.__clockWorker__}},{key:"mediaWorker",get:function(){return this.__mediaWorker__}},{key:"stageWorker",get:function(){return this.__stageWorker__}},{key:"reservationWorker",get:function(){return this.__reservationWorker__}},{key:"stateWorker",get:function(){return this.__stateWorker__}},{key:"stageId",get:function(){return this.stageWorker.__stageId__}},{key:"stageActiveNodeCount",get:function(){return this.stageWorker.__activeNodeCount__}},{key:"stageMasterNodeCount",get:function(){return this.stageWorker.__masterNodeCount__}},{key:"nodeId",get:function(){return _.default.fetch("".concat(t.Name,".nodeId"),h()())}},{key:"accessToken",get:function(){return this.player.accessToken}},{key:"secretToken",get:function(){return this.player.secretToken}},{key:"isMaster",get:function(){return!u.default.stringIsBlank(this.secretToken)}},{key:"isSlave",get:function(){return!!u.default.stringIsBlank(this.secretToken)}},{key:"nodeTimeoutThreshold",set:function(e){15>e&&(y.default.warn("You can't set less than 'SW.Plugin.SongleSync.MinNodeTimeoutThreshold'"),e=15),3600<e&&(y.default.warn("You can't set more than 'SW.Plugin.SongleSync.MaxNodeTimeoutThreshold'"),e=3600),this.__nodeTimeoutThreshold__=e},get:function(){return this.__nodeTimeoutThreshold__}},{key:"globalClockTime",get:function(){return u.default.currentTimeToMilliseconds+this.clockWorker.globalClockTimeOffset}},{key:"globalPosition",get:function(){var e=this.globalClockTime-this.stageWorker.__globalClockTime__,t=this.stageWorker.__position__+(this.player.isPlaying?e:0)+this.__globalPositionOffset__;return t<0&&(t=0),t>this.player.duration&&(t=this.player.duration),t}},{key:"globalPositionOffset",set:function(e){this.__globalPositionOffset__=e,this.player.media.seekTo(this.globalPosition)},get:function(){return this.__globalPositionOffset__}},{key:"reservations",get:function(){return this.stageWorker.__reservations__}}]),t}();t.default=M},78:function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),a=n(18),i=n(8),u=n(7),s=n(38),c=n(0);function l(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){l(a,r,o,i,u,"next",e)}function u(e){l(a,r,o,i,u,"throw",e)}i(void 0)})}}function p(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e,t,n){return(_="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=256,m=30,k="#e17",b="#222",T=256,w=40,S="#999",P="#eee",E="#f84",O="#48f",M="#e17",x="songle-api-plugin-songle-widget",C=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=p(this,d(t).call(this))).__element__=e.element,n.__responsive__=null!=e.responsive&&e.responsive,n.__showController__=null==e.showController||e.showController,n.__showOriginalSiteLink__=null==e.showOriginalSiteLink||e.showOriginalSiteLink,n.__showMusicMap__=null==e.showMusicMap||e.showMusicMap,n.__showSongleJpSiteLink__=null==e.showSongleJpSiteLink||e.showSongleJpSiteLink,n.__controllerWidth__=null!=e.controllerWidth?e.controllerWidth:g,n.__controllerHeight__=null!=e.controllerHeight?e.controllerHeight:m,n.__controllerMouseEnterColor__=null!=e.controllerMouseEnterColor?e.controllerMouseEnterColor:k,n.__controllerMouseLeaveColor__=null!=e.controllerMouseLeaveColor?e.controllerMouseLeaveColor:b,n.__language__=null!=e.language?e.language:c.default.language,n.__musicMapWidth__=null!=e.musicMapWidth?e.musicMapWidth:T,n.__musicMapHeight__=null!=e.musicMapHeight?e.musicMapHeight:w,n.__musicMapOuterBackgroundColor__=null!=e.musicMapOuterBackgroundColor?e.musicMapOuterBackgroundColor:S,n.__musicMapInnerBackgroundColor__=null!=e.musicMapInnerBackgroundColor?e.musicMapInnerBackgroundColor:P,n.__musicMapChorusSectionColor__=null!=e.musicMapChorusSectionColor?e.musicMapChorusSectionColor:E,n.__musicMapRepeatedSectionColor__=null!=e.musicMapRepeatedSectionColor?e.musicMapRepeatedSectionColor:O,n.__musicMapCursorColor__=null!=e.musicMapCursorColor?e.musicMapCursorColor:M,n.__className__="".concat(x,"-").concat(Math.random().toString(36).slice(-4)),n.__readyTrap__=function(e){return n.render()},n.__playTrap__=function(e){},n.__pauseTrap__=function(e){},n.__seekTrap__=function(e){},n.__resizeTrap__=function(e){n.__responsive__&&null!=n.element&&n.__updateSize__({width:n.element.offsetWidth,height:n.element.offsetHeight})&&n.render()},n.__scrollTrap__=function(e){n.__responsive__&&null!=n.element&&n.__updateSize__({width:n.element.offsetWidth,height:n.element.offsetHeight})&&n.render()},n.__responsive__&&null!=n.element&&(e.width=n.element.offsetWidth,e.height=n.element.offsetHeight),n.__updateSize__(e),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,a["default"]),y(t,null,[{key:"Name",get:function(){return x}}]),y(t,[{key:"initialize",value:function(){var e=f(o.a.mark(function e(n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:_(d(t.prototype),"initialize",this).call(this,n),this.player.on("ready",this.__readyTrap__),this.player.on("play",this.__playTrap__),this.player.on("pause",this.__pauseTrap__),this.player.on("seek",this.__seekTrap__),window.addEventListener("resize",this.__resizeTrap__,!1),window.addEventListener("scroll",this.__scrollTrap__,!1);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){var e=f(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:clearInterval(this.__musicMapAnimationIntervalId__),window.removeEventListener("resize",this.__resizeTrap__,!1),window.removeEventListener("scroll",this.__scrollTrap__,!1),this.player.off("ready",this.__readyTrap__),this.player.off("play",this.__playTrap__),this.player.off("pause",this.__pauseTrap__),this.player.off("seek",this.__seekTrap__),this.__removeRenderedElement__(),_(d(t.prototype),"dispose",this).call(this);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=document.createElement("div");clearInterval(this.__musicMapAnimationIntervalId__),e.className=this.__className__,e.style.lineHeight="normal",e.style.fontSize="10.5px",this.__showController__&&e.appendChild(this.__createControllerElement__({width:this.__controllerWidth__,height:this.__controllerHeight__,mouseEnterColor:this.__controllerMouseEnterColor__,mouseLeaveColor:this.__controllerMouseLeaveColor__})),this.__showOriginalSiteLink__&&e.appendChild(this.__createOriginalSiteLinkElement__({width:this.__musicMapWidth__,height:15})),this.__showMusicMap__&&e.appendChild(this.__createMusicMapElement__({width:this.__musicMapWidth__,height:this.__musicMapHeight__})),this.__showSongleJpSiteLink__&&e.appendChild(this.__createSongleJpSiteLinkElement__({width:this.__musicMapWidth__,height:15})),this.__removeRenderedElement__(),this.element&&this.element.appendChild(e)}},{key:"__removeRenderedElement__",value:function(){document.querySelectorAll("[class=".concat(this.__className__,"]")).forEach(function(e){e.remove()})}},{key:"__createControllerElement__",value:function(e){var t=document.createElement("div");t.style.display="block",t.style.overflow="hidden",t.style.width=e.width+"px",t.style.height=e.height+"px";var n=document.createElement("div");n.style.display="block",n.style.overflow="hidden",n.style.float="left",n.style.width=e.height+"px",n.style.height=e.height+"px";var r=this.__createPlayButtonElement__({size:e.height,mouseEnterColor:e.mouseEnterColor,mouseLeaveColor:e.mouseLeaveColor}),o=this.__createStopButtonElement__({size:e.height,mouseEnterColor:e.mouseEnterColor,mouseLeaveColor:e.mouseLeaveColor});n.appendChild(r),n.appendChild(o);var a=document.createElement("div");a.style.display="block",a.style.overflow="hidden",a.style.float="left",a.style.width=e.width-e.height+"px",a.style.height=e.height+"px";var i=document.createElement("a");i.href="".concat(c.default.defaultAppServerEndpoint,"/redirect_to/songlejp_song_site?url=").concat(encodeURIComponent(this.player.media.sourceUrl)),i.target="_blank",i.style.display="block",i.style.overflow="hidden",i.style.paddingLeft="8px",i.style.textOverflow="ellipsis",i.style.width=e.width-e.height+"px",i.style.height=e.height/2+"px",i.textContent=this.player.media.name;var u=document.createElement("a");return u.href="".concat(c.default.defaultAppServerEndpoint,"/redirect_to/songlejp_song_site?url=").concat(encodeURIComponent(this.player.media.sourceUrl)),u.target="_blank",u.style.display="block",u.style.overflow="hidden",u.style.paddingLeft="8px",u.style.textOverflow="ellipsis",u.style.width=e.width-e.height+"px",u.style.height=e.height/2+"px",u.textContent=this.player.media.artistName,a.appendChild(i),a.appendChild(u),t.appendChild(n),t.appendChild(a),t}},{key:"__createOriginalSiteLinkElement__",value:function(e){var t=document.createElement("div");t.style.display="block",t.style.overflow="hidden",t.style.width=e.width+"px",t.style.height=e.height+"px";var n=document.createElement("a");switch(n.href="".concat(c.default.defaultAppServerEndpoint,"/redirect_to/original_song_site?url=").concat(encodeURIComponent(this.player.media.sourceUrl)),n.target="_blank",n.style.display="block",n.style.overflow="hidden",n.style.float="left",n.style.margin="".concat(0,"px ").concat(2,"px"),n.style.textOverflow="ellipsis",n.style.textAlign="left",n.style.width=e.width/2-4+"px",n.style.height=e.height-0+"px",this.__language__){case"ja":case"en":default:n.textContent=""}t.appendChild(n);var r=document.createElement("a");switch(r.href="".concat(c.default.defaultAppServerEndpoint,"/redirect_to/original_song_site?url=").concat(encodeURIComponent(this.player.media.sourceUrl)),r.target="_blank",r.style.display="block",r.style.overflow="hidden",r.style.float="left",r.style.margin="".concat(0,"px ").concat(2,"px"),r.style.textOverflow="ellipsis",r.style.textAlign="right",r.style.width=e.width/2-4+"px",r.style.height=e.height-0+"px",this.__language__){case"ja":r.textContent="\u3053\u306e\u914d\u4fe1\u30b5\u30a4\u30c8\u3078";break;case"en":default:r.textContent="Original site"}return t.appendChild(r),t}},{key:"__createMusicMapElement__",value:function(e){var t=this,n=document.createElement("div");if(null==this.player.musicMap.chorus)return u.default.warn("'Songle.Player' do NOT have a chorus information. Please install the chorus plugin using 'Songle.Plugin.Chorus'"),n;n.style.width=e.width+"px",n.style.height=e.height+"px";var r=s.default.createSVGElement({width:e.width,height:e.height}),o=e.width-4,a=(e.height-4-6+1)/6,i=0;r.appendChild(s.default.createRectElement({x:0,y:0,width:e.width,height:e.height,fill:"none",stroke:this.__musicMapOuterBackgroundColor__})),r.addEventListener("click",function(e){t.player.seekTo(i||e.offsetX/o*t.player.duration),c.default.stringIsBlank(t.player.accessToken)&&c.default.stringIsBlank(t.player.secretToken)&&t.player.play()});for(var l=function(e){var n=(a+1)*e+1+1;r.appendChild(s.default.createRectElement({x:2,y:n,width:o,height:a,fill:t.__musicMapInnerBackgroundColor__,stroke:"none"}));var u=t.player.musicMap.chorus[e];if(!u)return"continue";u.items.forEach(function(e){var c=e.startTimeMs/t.player.duration*o+2,l=n,f=e.durationTimeMs/t.player.duration*o,p=a,_=s.default.createRectElement({x:c,y:l,width:f,height:p,fill:u.isChorus?t.__musicMapChorusSectionColor__:t.__musicMapRepeatedSectionColor__,stroke:"none"});_.style.cursor="pointer",_.addEventListener("mouseenter",function(){i=e.startTimeMs,_.style.opacity=.75}),_.addEventListener("mouseleave",function(){i=0,_.style.opacity=1}),r.appendChild(_)})},f=0;f<6;++f)l(f);var p=s.default.createRectElement({x:0,y:0,width:1,height:e.height,fill:"none",stroke:this.__musicMapCursorColor__});return this.__musicMapAnimationIntervalId__=setInterval(function(){p.setAttribute("x",e.width*(t.player.position/t.player.duration))},1e3),r.appendChild(p),n.appendChild(r),n}},{key:"__createPlayButtonElement__",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null!=t.size?t.size:30,r=null!=t.mouseEnterColor?t.mouseEnterColor:k,o=null!=t.mouseLeaveColor?t.mouseLeaveColor:b,a=null!=t.strokeWidth?t.strokeWidth:2,i=document.createElement("div");i.style.cursor="pointer",i.style.width=n+"px",i.style.height=n+"px",this.player.isPlaying?i.style.display="none":i.style.display="block";var u=s.default.createSVGElement({width:n,height:n}),c=s.default.createGroupElement({fill:o,stroke:o,strokeWidth:a}),l=1*(n/2-a),f=l+a,p=l+a,_=s.default.createCircleElement({cx:f,cy:p,r:l,fill:"none"}),d=.5*(n/2-a),h=1*d/1.41,y=f+Math.cos(3.14/180*135)*d+(d-h),v=p-Math.sin(3.14/180*135)*d,g=f+Math.cos(0)*h,m=p-Math.sin(0)*h,T=f+Math.cos(3.14/180*225)*d+(d-h),w=p-Math.sin(3.14/180*225)*d,S=s.default.createPolygonElement({points:[y,v,g,m,T,w]});return u.appendChild(c),c.appendChild(_),c.appendChild(S),i.appendChild(u),i.addEventListener("click",function(t){e.player.play()}),i.addEventListener("mouseenter",function(e){c.setAttribute("fill",r),c.setAttribute("stroke",r)}),i.addEventListener("mouseleave",function(e){c.setAttribute("fill",o),c.setAttribute("stroke",o)}),this.player.on("play",function(e){i.style.display="none"}),this.player.on("pause",function(e){i.style.display="block"}),i}},{key:"__createStopButtonElement__",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null!=t.size?t.size:30,r=null!=t.mouseEnterColor?t.mouseEnterColor:k,o=null!=t.mouseLeaveColor?t.mouseLeaveColor:b,a=null!=t.strokeWidth?t.strokeWidth:2,i=document.createElement("div");i.style.cursor="pointer",i.style.width=n+"px",i.style.height=n+"px",this.player.isPlaying?i.style.display="block":i.style.display="none";var u=s.default.createSVGElement({width:n,height:n}),c=s.default.createGroupElement({fill:o,stroke:o,strokeWidth:a}),l=1*(n/2-a),f=l+a,p=l+a,_=s.default.createCircleElement({cx:f,cy:p,r:l,fill:"none"}),d=.5*(n/2-a),h=f+Math.cos(3.14/180*135)*d,y=p-Math.sin(3.14/180*135)*d,v=h+.5*Math.abs(h-f),g=y,m=f+Math.cos(3.14/180*225)*d,T=p-Math.sin(3.14/180*225)*d,w=m+.5*Math.abs(h-f),S=T,P=s.default.createPolygonElement({points:[h,y,v,g,w,S,m,T]}),E=f+Math.cos(3.14/180*45)*d,O=p-Math.sin(3.14/180*45)*d,M=E-.5*Math.abs(E-f),x=O,C=f+Math.cos(3.14/180*315)*d,j=p-Math.sin(3.14/180*315)*d,I=C-.5*Math.abs(C-f),L=j,N=s.default.createPolygonElement({points:[M,x,E,O,C,j,I,L]});return u.appendChild(c),c.appendChild(_),c.appendChild(P),c.appendChild(N),i.appendChild(u),i.addEventListener("click",function(t){e.player.pause()}),i.addEventListener("mouseenter",function(e){c.setAttribute("stroke",r),c.setAttribute("fill",r)}),i.addEventListener("mouseleave",function(e){c.setAttribute("stroke",o),c.setAttribute("fill",o)}),this.player.on("play",function(e){i.style.display="block"}),this.player.on("pause",function(e){i.style.display="none"}),i}},{key:"__createSongleJpSiteLinkElement__",value:function(e){var t=document.createElement("div");t.style.display="block",t.style.overflow="hidden",t.style.width=e.width+"px",t.style.height=e.height+"px";var n=document.createElement("a");switch(n.href="".concat(c.default.defaultAppServerEndpoint,"/redirect_to/songlejp_song_site?url=").concat(encodeURIComponent(this.player.media.sourceUrl)),n.target="_blank",n.style.display="block",n.style.overflow="hidden",n.style.float="left",n.style.margin="".concat(0,"px ").concat(2,"px"),n.style.textOverflow="ellipsis",n.style.textAlign="left",n.style.width=e.width/2-4+"px",n.style.height=e.height-0+"px",this.__language__){case"ja":n.textContent="Songle\u3067\u30b5\u30d3\u8a02\u6b63";break;case"en":default:n.textContent="Annotate this song"}t.appendChild(n);var r=document.createElement("a");switch(r.href="".concat(c.default.defaultAppServerEndpoint),r.target="_blank",r.style.display="block",r.style.overflow="hidden",r.style.float="left",r.style.margin="".concat(0,"px ").concat(2,"px"),r.style.textOverflow="ellipsis",r.style.textAlign="right",r.style.width=e.width/2-4+"px",r.style.height=e.height-0+"px",this.__language__){case"ja":case"en":default:r.textContent="Powered by Songle API"}return t.appendChild(r),t}},{key:"__updateSize__",value:function(e){var t=!1;if(null!=e.width){if(e.width<20)return u.default.warn("Songle Widget is too small. Please check 'Songle.Plugin.SongleWidget' options"),!1;this.__controllerWidth__!=e.width&&(this.__controllerWidth__=e.width,t=!0),this.__musicMapWidth__!=e.width&&(this.__musicMapWidth__=e.width,t=!0)}if(null!=e.height){if(this.__showController__&&(e.height-=this.__controllerHeight__),this.__showOriginalSiteLink__&&(e.height-=15),this.__showSongleJpSiteLink__&&(e.height-=15),e.height<20)return u.default.warn("Songle Widget is too small. Please check 'Songle.Plugin.SongleWidget' options"),!1;this.__musicMapHeight__!=e.height&&(this.__musicMapHeight__=e.height,t=!0)}return t}},{key:"dispatcherName",get:function(){return x}},{key:"element",get:function(){return i.default.querySelector(this.__element__)}}]),t}();t.default=C},8:function(e,t,n){"use strict";n.r(t);var r=n(0);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.allow=n.allow||"autoplay",n.autoplay=n.autoplay||!1,n.controls=n.controls||!1,e.autoplay=n.autoplay,e.controls=n.controls,e.src=t,e.setAttribute("allow",n.allow)}var a={createHTMLAudioElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.default.global.document.createElement("audio");return o(n,e,t),n},createHTMLVideoElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.default.global.document.createElement("video");return o(n,e,t),n},createScriptElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.default.global.document.createElement("script");return t.async=t.async||!1,t.defer=t.defer||!1,t.type=t.type||"text/javascript",n.async=t.async,n.defer=t.defer,n.src=e,n.type=t.type,n.addEventListener("abort",t.onAbort,!1),n.addEventListener("error",t.onError,!1),n.addEventListener("load",t.onLoad,!1),n},querySelector:function(e){return"string"==typeof e?r.default.global.document.querySelector(e):e}};t.default=a},84:function(e,t,n){var r=n(119),o=n(120);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||r)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var u=0;u<16;++u)t[a+u]=i[u];return t||o(i)}},9:function(e,t,n){"use strict";n.r(t);var r=n(6),o=n(11),a=n(25),i={ajax:r.default.ajax,ajaxJSON:r.default.ajaxJSON,getJSON:r.default.getJSON,postJSON:r.default.postJSON,putJSON:r.default.putJSON,MusicMap:{getSong:o.default.getSong,getSongBeat:o.default.getSongBeat,getSongChord:o.default.getSongChord,getSongMelody:o.default.getSongMelody,getSongChorus:o.default.getSongChorus,getSongVariation:o.default.getSongVariation},SongleSync:a.default};t.default=i},94:function(e,t,n){"use strict";n.r(t);var r=n(43);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=a(this,i(t).call(this,e))).__enterStates__=[],n.__leaveStates__=[],n}var n,s,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["default"]),n=t,(s=[{key:"dispatch",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__player__.musicMap.beats.forEach(function(o){o.prev&&e<o.prev.startTimeMs&&t>=o.prev.startTimeMs&&n.__enterStates__[o.prev.index]&&!n.__leaveStates__[o.prev.index]&&(r.leave&&r.leave({beat:o.prev}),n.__leaveStates__[o.prev.index]=!0),o&&e<o.startTimeMs&&t>=o.startTimeMs&&(n.__enterStates__[o.index]||n.__leaveStates__[o.index]||(r.enter&&r.enter({beat:o}),n.__enterStates__[o.index]=!0))})}},{key:"reset",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.__enterStates__=[],this.__leaveStates__=[]}}])&&o(n.prototype,s),c&&o(n,c),t}();t.default=s},95:function(e,t,n){"use strict";n.r(t);var r=n(43);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=a(this,i(t).call(this,e))).__enterStates__=[],n.__leaveStates__=[],n}var n,s,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["default"]),n=t,(s=[{key:"dispatch",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__player__.musicMap.chords.forEach(function(o){e<o.startTimeMs+o.durationTimeMs&&t>=o.startTimeMs&&(o.prev&&(n.__leaveStates__[o.prev.index]||(n.__leaveStates__[o.prev.index]=!0,r.leave&&r.leave({chord:o.prev}))),o&&(n.__enterStates__[o.index]||(n.__enterStates__[o.index]=!0,r.enter&&r.enter({chord:o}))))})}},{key:"reset",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.__player__.musicMap.chords.forEach(function(n){e.__enterStates__[n.index]&&!e.__leaveStates__[n.index]&&t.leave&&t.leave({chord:n})}),this.__enterStates__=[],this.__leaveStates__=[]}}])&&o(n.prototype,s),c&&o(n,c),t}();t.default=s},96:function(e,t,n){"use strict";n.r(t);var r=n(43);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=a(this,i(t).call(this,e))).__enterStates__=[],n.__leaveStates__=[],n}var n,s,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["default"]),n=t,(s=[{key:"dispatch",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__player__.musicMap.melodies.forEach(function(o){e<o.startTimeMs+o.durationTimeMs&&t>=o.startTimeMs&&(o.prev&&(n.__leaveStates__[o.prev.index]||(n.__leaveStates__[o.prev.index]=!0,r.leave&&r.leave({melody:o.prev}))),o&&(n.__enterStates__[o.index]||(n.__enterStates__[o.index]=!0,r.enter&&r.enter({melody:o}))))})}},{key:"reset",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.__player__.musicMap.melodies.forEach(function(n){e.__enterStates__[n.index]&&!e.__leaveStates__[n.index]&&t.leave&&t.leave({melody:n})}),this.__enterStates__=[],this.__leaveStates__=[]}}])&&o(n.prototype,s),c&&o(n,c),t}();t.default=s},97:function(e,t,n){"use strict";n.r(t);var r=n(43);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=a(this,i(t).call(this,e))).__enterStates__=[],n.__leaveStates__=[],n}var n,s,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["default"]),n=t,(s=[{key:"dispatch",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__player__.musicMap.chorus.forEach(function(o){o.items.forEach(function(a){e<a.startTimeMs+a.durationTimeMs&&t>=a.startTimeMs?n.__invokeEnterTrap__(o,a,r):n.__invokeLeaveTrap__(o,a,r)})})}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.__invokeAllLeaveTrap__(e),this.__enterStates__=[],this.__leaveStates__=[]}},{key:"__getStateIndex__",value:function(e,t){return 16*e.index+t.index}},{key:"__invokeAllEnterTrap__",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.__player__.musicMap.chorus.forEach(function(n){n.items.forEach(function(r){e.__invokeEnterTrap__(n,r,t)})})}},{key:"__invokeAllLeaveTrap__",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.__player__.musicMap.chorus.forEach(function(n){n.items.forEach(function(r){e.__invokeLeaveTrap__(n,r,t)})})}},{key:"__invokeEnterTrap__",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.__getStateIndex__(e,t);this.__enterStates__[o]||this.__leaveStates__[o]||(e.items.forEach(function(t){n.__invokeLeaveTrap__(e,t,r)}),r.enter&&r.enter({section:e,sectionItem:t}),this.__enterStates__[o]=!0)}},{key:"__invokeLeaveTrap__",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.__getStateIndex__(e,t);this.__enterStates__[r]&&!this.__leaveStates__[r]&&(n.leave&&n.leave({section:e,sectionItem:t}),this.__leaveStates__[r]=!0)}}])&&o(n.prototype,s),c&&o(n,c),t}();t.default=s},98:function(e,t,n){"use strict";n.r(t);var r=n(43);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=a(this,i(t).call(this,e))).__enterStates__=[],n.__leaveStates__=[],n}var n,s,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["default"]),n=t,(s=[{key:"dispatch",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__player__.musicMap.variations.forEach(function(o){e<o.startTimeMs+o.durationTimeMs&&t>=o.startTimeMs&&(o.prev&&(n.__leaveStates__[o.prev.index]||(n.__leaveStates__[o.prev.index]=!0,r.leave&&r.leave({variation:o.prev}))),o&&(n.__enterStates__[o.index]||(n.__enterStates__[o.index]=!0,r.enter&&r.enter({variation:o}))))})}},{key:"reset",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.__player__.musicMap.variations.forEach(function(n){e.__enterStates__[n.index]&&!e.__leaveStates__[n.index]&&t.leave&&t.leave({variation:n})}),this.__enterStates__=[],this.__leaveStates__=[]}}])&&o(n.prototype,s),c&&o(n,c),t}();t.default=s}})});
//# sourceMappingURL=api-c80002a391de1aa5a6da.js.map